var Jn=Object.defineProperty;var Vn=(n,e,t)=>e in n?Jn(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var Y=(n,e,t)=>(Vn(n,typeof e!="symbol"?e+"":e,t),t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function t(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerPolicy&&(r.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?r.credentials="include":i.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(i){if(i.ep)return;i.ep=!0;const r=t(i);fetch(i.href,r)}})();function S(){}const En=n=>n;function et(n,e){for(const t in e)n[t]=e[t];return n}function Xn(n){return!!n&&(typeof n=="object"||typeof n=="function")&&typeof n.then=="function"}function Cn(n){return n()}function Mt(){return Object.create(null)}function ee(n){n.forEach(Cn)}function Ce(n){return typeof n=="function"}function te(n,e){return n!=n?e==e:n!==e||n&&typeof n=="object"||typeof n=="function"}let Ge;function Yn(n,e){return n===e?!0:(Ge||(Ge=document.createElement("a")),Ge.href=e,n===Ge.href)}function Kn(n){return Object.keys(n).length===0}function Sn(n,...e){if(n==null){for(const s of e)s(void 0);return S}const t=n.subscribe(...e);return t.unsubscribe?()=>t.unsubscribe():t}function He(n,e,t){n.$$.on_destroy.push(Sn(e,t))}function Tt(n,e,t,s){if(n){const i=Tn(n,e,t,s);return n[0](i)}}function Tn(n,e,t,s){return n[1]&&s?et(t.ctx.slice(),n[1](s(e))):t.ctx}function It(n,e,t,s){if(n[2]&&s){const i=n[2](s(t));if(e.dirty===void 0)return i;if(typeof i=="object"){const r=[],o=Math.max(e.dirty.length,i.length);for(let l=0;l<o;l+=1)r[l]=e.dirty[l]|i[l];return r}return e.dirty|i}return e.dirty}function xt(n,e,t,s,i,r){if(i){const o=Tn(e,t,s,r);n.p(o,i)}}function Dt(n){if(n.ctx.length>32){const e=[],t=n.ctx.length/32;for(let s=0;s<t;s++)e[s]=-1;return e}return-1}function Ot(n){const e={};for(const t in n)t[0]!=="$"&&(e[t]=n[t]);return e}function Ht(n){return n??""}function Pt(n){return n&&Ce(n.destroy)?n.destroy:S}const In=typeof window<"u";let xn=In?()=>window.performance.now():()=>Date.now(),Bt=In?n=>requestAnimationFrame(n):S;const Pe=new Set;function Dn(n){Pe.forEach(e=>{e.c(n)||(Pe.delete(e),e.f())}),Pe.size!==0&&Bt(Dn)}function Pn(n){let e;return Pe.size===0&&Bt(Dn),{promise:new Promise(t=>{Pe.add(e={c:n,f:t})}),abort(){Pe.delete(e)}}}function R(n,e){n.appendChild(e)}function Bn(n){if(!n)return document;const e=n.getRootNode?n.getRootNode():n.ownerDocument;return e&&e.host?e:n.ownerDocument}function Zn(n){const e=D("style");return e.textContent="/* empty */",Qn(Bn(n),e),e.sheet}function Qn(n,e){return R(n.head||n,e),e.sheet}function A(n,e,t){n.insertBefore(e,t||null)}function P(n){n.parentNode&&n.parentNode.removeChild(n)}function An(n,e){for(let t=0;t<n.length;t+=1)n[t]&&n[t].d(e)}function D(n){return document.createElement(n)}function es(n){return document.createElementNS("http://www.w3.org/2000/svg",n)}function le(n){return document.createTextNode(n)}function z(){return le(" ")}function _e(){return le("")}function Z(n,e,t,s){return n.addEventListener(e,t,s),()=>n.removeEventListener(e,t,s)}function T(n,e,t){t==null?n.removeAttribute(e):n.getAttribute(e)!==t&&n.setAttribute(e,t)}function ts(n){return Array.from(n.childNodes)}function tt(n,e){e=""+e,n.data!==e&&(n.data=e)}function mt(n,e){n.value=e??""}function jt(n,e,t){for(let s=0;s<n.options.length;s+=1){const i=n.options[s];if(i.__value===e){i.selected=!0;return}}(!t||e!==void 0)&&(n.selectedIndex=-1)}function ns(n){const e=n.querySelector(":checked");return e&&e.__value}function Se(n,e,t){n.classList.toggle(e,!!t)}function Rn(n,e,{bubbles:t=!1,cancelable:s=!1}={}){return new CustomEvent(n,{detail:e,bubbles:t,cancelable:s})}class ss{constructor(e=!1){Y(this,"is_svg",!1);Y(this,"e");Y(this,"n");Y(this,"t");Y(this,"a");this.is_svg=e,this.e=this.n=null}c(e){this.h(e)}m(e,t,s=null){this.e||(this.is_svg?this.e=es(t.nodeName):this.e=D(t.nodeType===11?"TEMPLATE":t.nodeName),this.t=t.tagName!=="TEMPLATE"?t:t.content,this.c(e)),this.i(s)}h(e){this.e.innerHTML=e,this.n=Array.from(this.e.nodeName==="TEMPLATE"?this.e.content.childNodes:this.e.childNodes)}i(e){for(let t=0;t<this.n.length;t+=1)A(this.t,this.n[t],e)}p(e){this.d(),this.h(e),this.i(this.a)}d(){this.n.forEach(P)}}function Ft(n,e){return new n(e)}const nt=new Map;let st=0;function is(n){let e=5381,t=n.length;for(;t--;)e=(e<<5)-e^n.charCodeAt(t);return e>>>0}function rs(n,e){const t={stylesheet:Zn(e),rules:{}};return nt.set(n,t),t}function Ln(n,e,t,s,i,r,o,l=0){const c=16.666/s;let a=`{
`;for(let _=0;_<=1;_+=c){const m=e+(t-e)*r(_);a+=_*100+`%{${o(m,1-m)}}
`}const h=a+`100% {${o(t,1-t)}}
}`,u=`__svelte_${is(h)}_${l}`,f=Bn(n),{stylesheet:g,rules:p}=nt.get(f)||rs(f,n);p[u]||(p[u]=!0,g.insertRule(`@keyframes ${u} ${h}`,g.cssRules.length));const b=n.style.animation||"";return n.style.animation=`${b?`${b}, `:""}${u} ${s}ms linear ${i}ms 1 both`,st+=1,u}function bt(n,e){const t=(n.style.animation||"").split(", "),s=t.filter(e?r=>r.indexOf(e)<0:r=>r.indexOf("__svelte")===-1),i=t.length-s.length;i&&(n.style.animation=s.join(", "),st-=i,st||os())}function os(){Bt(()=>{st||(nt.forEach(n=>{const{ownerNode:e}=n.stylesheet;e&&P(e)}),nt.clear())})}let Fe;function ge(n){Fe=n}function $e(){if(!Fe)throw new Error("Function called outside component initialization");return Fe}function At(n){$e().$$.on_mount.push(n)}function ls(n){$e().$$.on_destroy.push(n)}function cs(){const n=$e();return(e,t,{cancelable:s=!1}={})=>{const i=n.$$.callbacks[e];if(i){const r=Rn(e,t,{cancelable:s});return i.slice().forEach(o=>{o.call(n,r)}),!r.defaultPrevented}return!0}}function ht(n,e){return $e().$$.context.set(n,e),e}function wt(n){return $e().$$.context.get(n)}const xe=[],ve=[];let Be=[];const yt=[],as=Promise.resolve();let vt=!1;function hs(){vt||(vt=!0,as.then(Rt))}function Ee(n){Be.push(n)}function us(n){yt.push(n)}const ut=new Set;let Te=0;function Rt(){if(Te!==0)return;const n=Fe;do{try{for(;Te<xe.length;){const e=xe[Te];Te++,ge(e),fs(e.$$)}}catch(e){throw xe.length=0,Te=0,e}for(ge(null),xe.length=0,Te=0;ve.length;)ve.pop()();for(let e=0;e<Be.length;e+=1){const t=Be[e];ut.has(t)||(ut.add(t),t())}Be.length=0}while(xe.length);for(;yt.length;)yt.pop()();vt=!1,ut.clear(),ge(n)}function fs(n){if(n.fragment!==null){n.update(),ee(n.before_update);const e=n.dirty;n.dirty=[-1],n.fragment&&n.fragment.p(n.ctx,e),n.after_update.forEach(Ee)}}function ds(n){const e=[],t=[];Be.forEach(s=>n.indexOf(s)===-1?e.push(s):t.push(s)),t.forEach(s=>s()),Be=e}let Ue;function $n(){return Ue||(Ue=Promise.resolve(),Ue.then(()=>{Ue=null})),Ue}function it(n,e,t){n.dispatchEvent(Rn(`${e?"intro":"outro"}${t}`))}const Ke=new Set;let ye;function pe(){ye={r:0,c:[],p:ye}}function me(){ye.r||ee(ye.c),ye=ye.p}function $(n,e){n&&n.i&&(Ke.delete(n),n.i(e))}function U(n,e,t,s){if(n&&n.o){if(Ke.has(n))return;Ke.add(n),ye.c.push(()=>{Ke.delete(n),s&&(t&&n.d(1),s())}),n.o(e)}else s&&s()}const Nn={duration:0};function gs(n,e,t){const s={direction:"in"};let i=e(n,t,s),r=!1,o,l,c=0;function a(){o&&bt(n,o)}function h(){const{delay:f=0,duration:g=300,easing:p=En,tick:b=S,css:_}=i||Nn;_&&(o=Ln(n,0,1,g,f,p,_,c++)),b(0,1);const m=xn()+f,v=m+g;l&&l.abort(),r=!0,Ee(()=>it(n,!0,"start")),l=Pn(y=>{if(r){if(y>=v)return b(1,0),it(n,!0,"end"),a(),r=!1;if(y>=m){const E=p((y-m)/g);b(E,1-E)}}return r})}let u=!1;return{start(){u||(u=!0,bt(n),Ce(i)?(i=i(s),$n().then(h)):h())},invalidate(){u=!1},end(){r&&(a(),r=!1)}}}function _s(n,e,t){const s={direction:"out"};let i=e(n,t,s),r=!0,o;const l=ye;l.r+=1;let c;function a(){const{delay:h=0,duration:u=300,easing:f=En,tick:g=S,css:p}=i||Nn;p&&(o=Ln(n,1,0,u,h,f,p));const b=xn()+h,_=b+u;Ee(()=>it(n,!1,"start")),"inert"in n&&(c=n.inert,n.inert=!0),Pn(m=>{if(r){if(m>=_)return g(0,1),it(n,!1,"end"),--l.r||ee(l.c),!1;if(m>=b){const v=f((m-b)/u);g(1-v,v)}}return r})}return Ce(i)?$n().then(()=>{i=i(s),a()}):a(),{end(h){h&&"inert"in n&&(n.inert=c),h&&i.tick&&i.tick(1,0),r&&(o&&bt(n,o),r=!1)}}}function Wt(n,e){const t=e.token={};function s(i,r,o,l){if(e.token!==t)return;e.resolved=l;let c=e.ctx;o!==void 0&&(c=c.slice(),c[o]=l);const a=i&&(e.current=i)(c);let h=!1;e.block&&(e.blocks?e.blocks.forEach((u,f)=>{f!==r&&u&&(pe(),U(u,1,1,()=>{e.blocks[f]===u&&(e.blocks[f]=null)}),me())}):e.block.d(1),a.c(),$(a,1),a.m(e.mount(),e.anchor),h=!0),e.block=a,e.blocks&&(e.blocks[r]=a),h&&Rt()}if(Xn(n)){const i=$e();if(n.then(r=>{ge(i),s(e.then,1,e.value,r),ge(null)},r=>{if(ge(i),s(e.catch,2,e.error,r),ge(null),!e.hasCatch)throw r}),e.current!==e.pending)return s(e.pending,0),!0}else{if(e.current!==e.then)return s(e.then,1,e.value,n),!0;e.resolved=n}}function ps(n,e,t){const s=e.slice(),{resolved:i}=n;n.current===n.then&&(s[n.value]=i),n.current===n.catch&&(s[n.error]=i),n.block.p(s,t)}function rt(n){return(n==null?void 0:n.length)!==void 0?n:Array.from(n)}function zt(n,e){const t={},s={},i={$$scope:1};let r=n.length;for(;r--;){const o=n[r],l=e[r];if(l){for(const c in o)c in l||(s[c]=1);for(const c in l)i[c]||(t[c]=l[c],i[c]=1);n[r]=l}else for(const c in o)i[c]=1}for(const o in s)o in t||(t[o]=void 0);return t}function Je(n){return typeof n=="object"&&n!==null?n:{}}function ms(n,e,t){const s=n.$$.props[e];s!==void 0&&(n.$$.bound[s]=t,t(n.$$.ctx[s]))}function ce(n){n&&n.c()}function se(n,e,t){const{fragment:s,after_update:i}=n.$$;s&&s.m(e,t),Ee(()=>{const r=n.$$.on_mount.map(Cn).filter(Ce);n.$$.on_destroy?n.$$.on_destroy.push(...r):ee(r),n.$$.on_mount=[]}),i.forEach(Ee)}function ie(n,e){const t=n.$$;t.fragment!==null&&(ds(t.after_update),ee(t.on_destroy),t.fragment&&t.fragment.d(e),t.on_destroy=t.fragment=null,t.ctx=[])}function bs(n,e){n.$$.dirty[0]===-1&&(xe.push(n),hs(),n.$$.dirty.fill(0)),n.$$.dirty[e/31|0]|=1<<e%31}function ae(n,e,t,s,i,r,o=null,l=[-1]){const c=Fe;ge(n);const a=n.$$={fragment:null,ctx:[],props:r,update:S,not_equal:i,bound:Mt(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(c?c.$$.context:[])),callbacks:Mt(),dirty:l,skip_bound:!1,root:e.target||c.$$.root};o&&o(a.root);let h=!1;if(a.ctx=t?t(n,e.props||{},(u,f,...g)=>{const p=g.length?g[0]:f;return a.ctx&&i(a.ctx[u],a.ctx[u]=p)&&(!a.skip_bound&&a.bound[u]&&a.bound[u](p),h&&bs(n,u)),f}):[],a.update(),h=!0,ee(a.before_update),a.fragment=s?s(a.ctx):!1,e.target){if(e.hydrate){const u=ts(e.target);a.fragment&&a.fragment.l(u),u.forEach(P)}else a.fragment&&a.fragment.c();e.intro&&$(n.$$.fragment),se(n,e.target,e.anchor),Rt()}ge(c)}class he{constructor(){Y(this,"$$");Y(this,"$$set")}$destroy(){ie(this,1),this.$destroy=S}$on(e,t){if(!Ce(t))return S;const s=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return s.push(t),()=>{const i=s.indexOf(t);i!==-1&&s.splice(i,1)}}$set(e){this.$$set&&!Kn(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const ws="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(ws);const qt={},kt={},ys={},Un=/^:(.+)/,Gt=4,vs=3,ks=2,Es=1,Cs=1,Et=n=>n.replace(/(^\/+|\/+$)/g,"").split("/"),ft=n=>n.replace(/(^\/+|\/+$)/g,""),Ss=(n,e)=>{const t=n.default?0:Et(n.path).reduce((s,i)=>(s+=Gt,i===""?s+=Cs:Un.test(i)?s+=ks:i[0]==="*"?s-=Gt+Es:s+=vs,s),0);return{route:n,score:t,index:e}},Ts=n=>n.map(Ss).sort((e,t)=>e.score<t.score?1:e.score>t.score?-1:e.index-t.index),Jt=(n,e)=>{let t,s;const[i]=e.split("?"),r=Et(i),o=r[0]==="",l=Ts(n);for(let c=0,a=l.length;c<a;c++){const h=l[c].route;let u=!1;if(h.default){s={route:h,params:{},uri:e};continue}const f=Et(h.path),g={},p=Math.max(r.length,f.length);let b=0;for(;b<p;b++){const _=f[b],m=r[b];if(_&&_[0]==="*"){const y=_==="*"?"*":_.slice(1);g[y]=r.slice(b).map(decodeURIComponent).join("/");break}if(typeof m>"u"){u=!0;break}const v=Un.exec(_);if(v&&!o){const y=decodeURIComponent(m);g[v[1]]=y}else if(_!==m){u=!0;break}}if(!u){t={route:h,params:g,uri:"/"+r.slice(0,b).join("/")};break}}return t||s||null},Vt=(n,e)=>`${ft(e==="/"?n:`${ft(n)}/${ft(e)}`)}/`,Mn=()=>typeof window<"u"&&"document"in window&&"location"in window,Is=n=>({params:n&4}),Xt=n=>({params:n[2]});function Yt(n){let e,t,s,i;const r=[Ds,xs],o=[];function l(c,a){return c[0]?0:1}return e=l(n),t=o[e]=r[e](n),{c(){t.c(),s=_e()},m(c,a){o[e].m(c,a),A(c,s,a),i=!0},p(c,a){let h=e;e=l(c),e===h?o[e].p(c,a):(pe(),U(o[h],1,1,()=>{o[h]=null}),me(),t=o[e],t?t.p(c,a):(t=o[e]=r[e](c),t.c()),$(t,1),t.m(s.parentNode,s))},i(c){i||($(t),i=!0)},o(c){U(t),i=!1},d(c){c&&P(s),o[e].d(c)}}}function xs(n){let e;const t=n[8].default,s=Tt(t,n,n[7],Xt);return{c(){s&&s.c()},m(i,r){s&&s.m(i,r),e=!0},p(i,r){s&&s.p&&(!e||r&132)&&xt(s,t,i,i[7],e?It(t,i[7],r,Is):Dt(i[7]),Xt)},i(i){e||($(s,i),e=!0)},o(i){U(s,i),e=!1},d(i){s&&s.d(i)}}}function Ds(n){let e,t,s,i={ctx:n,current:null,token:null,hasCatch:!1,pending:As,then:Bs,catch:Ps,value:12,blocks:[,,,]};return Wt(t=n[0],i),{c(){e=_e(),i.block.c()},m(r,o){A(r,e,o),i.block.m(r,i.anchor=o),i.mount=()=>e.parentNode,i.anchor=e,s=!0},p(r,o){n=r,i.ctx=n,o&1&&t!==(t=n[0])&&Wt(t,i)||ps(i,n,o)},i(r){s||($(i.block),s=!0)},o(r){for(let o=0;o<3;o+=1){const l=i.blocks[o];U(l)}s=!1},d(r){r&&P(e),i.block.d(r),i.token=null,i=null}}}function Ps(n){return{c:S,m:S,p:S,i:S,o:S,d:S}}function Bs(n){var l;let e,t,s;const i=[n[2],n[3]];var r=((l=n[12])==null?void 0:l.default)||n[12];function o(c,a){let h={};if(a!==void 0&&a&12)h=zt(i,[a&4&&Je(c[2]),a&8&&Je(c[3])]);else for(let u=0;u<i.length;u+=1)h=et(h,i[u]);return{props:h}}return r&&(e=Ft(r,o(n))),{c(){e&&ce(e.$$.fragment),t=_e()},m(c,a){e&&se(e,c,a),A(c,t,a),s=!0},p(c,a){var h;if(a&1&&r!==(r=((h=c[12])==null?void 0:h.default)||c[12])){if(e){pe();const u=e;U(u.$$.fragment,1,0,()=>{ie(u,1)}),me()}r?(e=Ft(r,o(c,a)),ce(e.$$.fragment),$(e.$$.fragment,1),se(e,t.parentNode,t)):e=null}else if(r){const u=a&12?zt(i,[a&4&&Je(c[2]),a&8&&Je(c[3])]):{};e.$set(u)}},i(c){s||(e&&$(e.$$.fragment,c),s=!0)},o(c){e&&U(e.$$.fragment,c),s=!1},d(c){c&&P(t),e&&ie(e,c)}}}function As(n){return{c:S,m:S,p:S,i:S,o:S,d:S}}function Rs(n){let e,t,s=n[1]&&n[1].route===n[5]&&Yt(n);return{c(){s&&s.c(),e=_e()},m(i,r){s&&s.m(i,r),A(i,e,r),t=!0},p(i,[r]){i[1]&&i[1].route===i[5]?s?(s.p(i,r),r&2&&$(s,1)):(s=Yt(i),s.c(),$(s,1),s.m(e.parentNode,e)):s&&(pe(),U(s,1,1,()=>{s=null}),me())},i(i){t||($(s),t=!0)},o(i){U(s),t=!1},d(i){i&&P(e),s&&s.d(i)}}}function Ls(n,e,t){let s,{$$slots:i={},$$scope:r}=e,{path:o=""}=e,{component:l=null}=e,c={},a={};const{registerRoute:h,unregisterRoute:u,activeRoute:f}=wt(kt);He(n,f,p=>t(1,s=p));const g={path:o,default:o===""};return h(g),ls(()=>{u(g)}),n.$$set=p=>{t(11,e=et(et({},e),Ot(p))),"path"in p&&t(6,o=p.path),"component"in p&&t(0,l=p.component),"$$scope"in p&&t(7,r=p.$$scope)},n.$$.update=()=>{if(s&&s.route===g){t(2,c=s.params);const{component:p,path:b,..._}=e;t(3,a=_),p&&(p.toString().startsWith("class ")?t(0,l=p):t(0,l=p())),Mn()&&!s.preserveScroll&&(window==null||window.scrollTo(0,0))}},e=Ot(e),[l,s,c,a,f,g,o,r,i]}class Kt extends he{constructor(e){super(),ae(this,e,Ls,Rs,te,{path:6,component:0})}}const Ie=[];function $s(n,e){return{subscribe:je(n,e).subscribe}}function je(n,e=S){let t;const s=new Set;function i(l){if(te(n,l)&&(n=l,t)){const c=!Ie.length;for(const a of s)a[1](),Ie.push(a,n);if(c){for(let a=0;a<Ie.length;a+=2)Ie[a][0](Ie[a+1]);Ie.length=0}}}function r(l){i(l(n))}function o(l,c=S){const a=[l,c];return s.add(a),s.size===1&&(t=e(i,r)||S),l(n),()=>{s.delete(a),s.size===0&&t&&(t(),t=null)}}return{set:i,update:r,subscribe:o}}function Ns(n,e,t){const s=!Array.isArray(n),i=s?[n]:n;if(!i.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const r=e.length<2;return $s(t,(o,l)=>{let c=!1;const a=[];let h=0,u=S;const f=()=>{if(h)return;u();const p=e(s?a[0]:a,o,l);r?o(p):u=Ce(p)?p:S},g=i.map((p,b)=>Sn(p,_=>{a[b]=_,h&=~(1<<b),c&&f()},()=>{h|=1<<b}));return c=!0,f(),function(){ee(g),u(),c=!1}})}const dt=n=>({...n.location,state:n.history.state,key:n.history.state&&n.history.state.key||"initial"}),Us=n=>{const e=[];let t=dt(n);return{get location(){return t},listen(s){e.push(s);const i=()=>{t=dt(n),s({location:t,action:"POP"})};return n.addEventListener("popstate",i),()=>{n.removeEventListener("popstate",i);const r=e.indexOf(s);e.splice(r,1)}},navigate(s,{state:i,replace:r=!1,preserveScroll:o=!1}={}){i={...i,key:Date.now()+""};try{r?n.history.replaceState(i,"",s):n.history.pushState(i,"",s)}catch{n.location[r?"replace":"assign"](s)}t=dt(n),e.forEach(l=>l({location:t,action:"PUSH",preserveScroll:o})),document.activeElement.blur()}}},Ms=(n="/")=>{let e=0;const t=[{pathname:n,search:""}],s=[];return{get location(){return t[e]},addEventListener(i,r){},removeEventListener(i,r){},history:{get entries(){return t},get index(){return e},get state(){return s[e]},pushState(i,r,o){const[l,c=""]=o.split("?");e++,t.push({pathname:l,search:c}),s.push(i)},replaceState(i,r,o){const[l,c=""]=o.split("?");t[e]={pathname:l,search:c},s[e]=i}}}},Os=Us(Mn()?window:Ms()),Hs=n=>({route:n&4,location:n&2}),Zt=n=>({route:n[2]&&n[2].uri,location:n[1]}),js=n=>({route:n&4,location:n&2}),Qt=n=>({route:n[2]&&n[2].uri,location:n[1]});function Fs(n){let e;const t=n[15].default,s=Tt(t,n,n[14],Zt);return{c(){s&&s.c()},m(i,r){s&&s.m(i,r),e=!0},p(i,r){s&&s.p&&(!e||r&16390)&&xt(s,t,i,i[14],e?It(t,i[14],r,Hs):Dt(i[14]),Zt)},i(i){e||($(s,i),e=!0)},o(i){U(s,i),e=!1},d(i){s&&s.d(i)}}}function Ws(n){let e=n[1].pathname,t,s,i=en(n);return{c(){i.c(),t=_e()},m(r,o){i.m(r,o),A(r,t,o),s=!0},p(r,o){o&2&&te(e,e=r[1].pathname)?(pe(),U(i,1,1,S),me(),i=en(r),i.c(),$(i,1),i.m(t.parentNode,t)):i.p(r,o)},i(r){s||($(i),s=!0)},o(r){U(i),s=!1},d(r){r&&P(t),i.d(r)}}}function en(n){let e,t,s,i;const r=n[15].default,o=Tt(r,n,n[14],Qt);return{c(){e=D("div"),o&&o.c()},m(l,c){A(l,e,c),o&&o.m(e,null),i=!0},p(l,c){o&&o.p&&(!i||c&16390)&&xt(o,r,l,l[14],i?It(r,l[14],c,js):Dt(l[14]),Qt)},i(l){i||($(o,l),l&&Ee(()=>{i&&(s&&s.end(1),t=gs(e,n[3],{}),t.start())}),i=!0)},o(l){U(o,l),t&&t.invalidate(),l&&(s=_s(e,n[3],{})),i=!1},d(l){l&&P(e),o&&o.d(l),l&&s&&s.end()}}}function zs(n){let e,t,s,i;const r=[Ws,Fs],o=[];function l(c,a){return c[0]?0:1}return e=l(n),t=o[e]=r[e](n),{c(){t.c(),s=_e()},m(c,a){o[e].m(c,a),A(c,s,a),i=!0},p(c,[a]){let h=e;e=l(c),e===h?o[e].p(c,a):(pe(),U(o[h],1,1,()=>{o[h]=null}),me(),t=o[e],t?t.p(c,a):(t=o[e]=r[e](c),t.c()),$(t,1),t.m(s.parentNode,s))},i(c){i||($(t),i=!0)},o(c){U(t),i=!1},d(c){c&&P(s),o[e].d(c)}}}function qs(n,e,t){let s,i,r,o,{$$slots:l={},$$scope:c}=e,{basepath:a="/"}=e,{url:h=null}=e,{viewtransition:u=null}=e,{history:f=Os}=e;const g=(k,j,w)=>{const x=u(w);return typeof(x==null?void 0:x.fn)=="function"?x.fn(k,x):x};ht(ys,f);const p=wt(qt),b=wt(kt),_=je([]);He(n,_,k=>t(12,i=k));const m=je(null);He(n,m,k=>t(2,o=k));let v=!1;const y=p||je(h?{pathname:h}:f.location);He(n,y,k=>t(1,s=k));const E=b?b.routerBase:je({path:a,uri:a});He(n,E,k=>t(13,r=k));const C=Ns([E,m],([k,j])=>{if(!j)return k;const{path:w}=k,{route:x,uri:B}=j;return{path:x.default?w:x.path.replace(/\*.*$/,""),uri:B}}),I=k=>{const{path:j}=r;let{path:w}=k;if(k._path=w,k.path=Vt(j,w),typeof window>"u"){if(v)return;const x=Jt([k],s.pathname);x&&(m.set(x),v=!0)}else _.update(x=>[...x,k])},F=k=>{_.update(j=>j.filter(w=>w!==k))};let L=!1;return p||(At(()=>f.listen(j=>{t(11,L=j.preserveScroll||!1),y.set(j.location)})),ht(qt,y)),ht(kt,{activeRoute:m,base:E,routerBase:C,registerRoute:I,unregisterRoute:F}),n.$$set=k=>{"basepath"in k&&t(8,a=k.basepath),"url"in k&&t(9,h=k.url),"viewtransition"in k&&t(0,u=k.viewtransition),"history"in k&&t(10,f=k.history),"$$scope"in k&&t(14,c=k.$$scope)},n.$$.update=()=>{if(n.$$.dirty&8192){const{path:k}=r;_.update(j=>j.map(w=>Object.assign(w,{path:Vt(k,w._path)})))}if(n.$$.dirty&6146){const k=Jt(i,s.pathname);m.set(k&&{...k,preserveScroll:L})}},[u,s,o,g,_,m,y,E,a,h,f,L,i,r,c,l]}class Gs extends he{constructor(e){super(),ae(this,e,qs,zs,te,{basepath:8,url:9,viewtransition:0,history:10})}}class Ae extends Error{constructor(e,t){const s=new.target.prototype;super(`${e}: Status code '${t}'`),this.statusCode=t,this.__proto__=s}}class Lt extends Error{constructor(e="A timeout occurred."){const t=new.target.prototype;super(e),this.__proto__=t}}class ne extends Error{constructor(e="An abort occurred."){const t=new.target.prototype;super(e),this.__proto__=t}}class Js extends Error{constructor(e,t){const s=new.target.prototype;super(e),this.transport=t,this.errorType="UnsupportedTransportError",this.__proto__=s}}class Vs extends Error{constructor(e,t){const s=new.target.prototype;super(e),this.transport=t,this.errorType="DisabledTransportError",this.__proto__=s}}class Xs extends Error{constructor(e,t){const s=new.target.prototype;super(e),this.transport=t,this.errorType="FailedToStartTransportError",this.__proto__=s}}class Ys extends Error{constructor(e){const t=new.target.prototype;super(e),this.errorType="FailedToNegotiateWithServerError",this.__proto__=t}}class Ks extends Error{constructor(e,t){const s=new.target.prototype;super(e),this.innerErrors=t,this.__proto__=s}}class On{constructor(e,t,s){this.statusCode=e,this.statusText=t,this.content=s}}class ct{get(e,t){return this.send({...t,method:"GET",url:e})}post(e,t){return this.send({...t,method:"POST",url:e})}delete(e,t){return this.send({...t,method:"DELETE",url:e})}getCookieString(e){return""}}var d;(function(n){n[n.Trace=0]="Trace",n[n.Debug=1]="Debug",n[n.Information=2]="Information",n[n.Warning=3]="Warning",n[n.Error=4]="Error",n[n.Critical=5]="Critical",n[n.None=6]="None"})(d||(d={}));class We{constructor(){}log(e,t){}}We.instance=new We;const Zs="7.0.12";class J{static isRequired(e,t){if(e==null)throw new Error(`The '${t}' argument is required.`)}static isNotEmpty(e,t){if(!e||e.match(/^\s*$/))throw new Error(`The '${t}' argument should not be empty.`)}static isIn(e,t,s){if(!(e in t))throw new Error(`Unknown ${s} value: ${e}.`)}}class G{static get isBrowser(){return typeof window=="object"&&typeof window.document=="object"}static get isWebWorker(){return typeof self=="object"&&"importScripts"in self}static get isReactNative(){return typeof window=="object"&&typeof window.document>"u"}static get isNode(){return!this.isBrowser&&!this.isWebWorker&&!this.isReactNative}}function ze(n,e){let t="";return qe(n)?(t=`Binary data of length ${n.byteLength}`,e&&(t+=`. Content: '${Qs(n)}'`)):typeof n=="string"&&(t=`String data of length ${n.length}`,e&&(t+=`. Content: '${n}'`)),t}function Qs(n){const e=new Uint8Array(n);let t="";return e.forEach(s=>{const i=s<16?"0":"";t+=`0x${i}${s.toString(16)} `}),t.substr(0,t.length-1)}function qe(n){return n&&typeof ArrayBuffer<"u"&&(n instanceof ArrayBuffer||n.constructor&&n.constructor.name==="ArrayBuffer")}async function Hn(n,e,t,s,i,r){const o={},[l,c]=Re();o[l]=c,n.log(d.Trace,`(${e} transport) sending data. ${ze(i,r.logMessageContent)}.`);const a=qe(i)?"arraybuffer":"text",h=await t.post(s,{content:i,headers:{...o,...r.headers},responseType:a,timeout:r.timeout,withCredentials:r.withCredentials});n.log(d.Trace,`(${e} transport) request complete. Response status: ${h.statusCode}.`)}function ei(n){return n===void 0?new ot(d.Information):n===null?We.instance:n.log!==void 0?n:new ot(n)}class ti{constructor(e,t){this._subject=e,this._observer=t}dispose(){const e=this._subject.observers.indexOf(this._observer);e>-1&&this._subject.observers.splice(e,1),this._subject.observers.length===0&&this._subject.cancelCallback&&this._subject.cancelCallback().catch(t=>{})}}class ot{constructor(e){this._minLevel=e,this.out=console}log(e,t){if(e>=this._minLevel){const s=`[${new Date().toISOString()}] ${d[e]}: ${t}`;switch(e){case d.Critical:case d.Error:this.out.error(s);break;case d.Warning:this.out.warn(s);break;case d.Information:this.out.info(s);break;default:this.out.log(s);break}}}}function Re(){let n="X-SignalR-User-Agent";return G.isNode&&(n="User-Agent"),[n,ni(Zs,si(),ri(),ii())]}function ni(n,e,t,s){let i="Microsoft SignalR/";const r=n.split(".");return i+=`${r[0]}.${r[1]}`,i+=` (${n}; `,e&&e!==""?i+=`${e}; `:i+="Unknown OS; ",i+=`${t}`,s?i+=`; ${s}`:i+="; Unknown Runtime Version",i+=")",i}function si(){if(G.isNode)switch(process.platform){case"win32":return"Windows NT";case"darwin":return"macOS";case"linux":return"Linux";default:return process.platform}else return""}function ii(){if(G.isNode)return process.versions.node}function ri(){return G.isNode?"NodeJS":"Browser"}function tn(n){return n.stack?n.stack:n.message?n.message:`${n}`}function oi(){if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("could not find global")}class li extends ct{constructor(e){if(super(),this._logger=e,typeof fetch>"u"){const t=typeof __webpack_require__=="function"?__non_webpack_require__:require;this._jar=new(t("tough-cookie")).CookieJar,this._fetchType=t("node-fetch"),this._fetchType=t("fetch-cookie")(this._fetchType,this._jar)}else this._fetchType=fetch.bind(oi());if(typeof AbortController>"u"){const t=typeof __webpack_require__=="function"?__non_webpack_require__:require;this._abortControllerType=t("abort-controller")}else this._abortControllerType=AbortController}async send(e){if(e.abortSignal&&e.abortSignal.aborted)throw new ne;if(!e.method)throw new Error("No method defined.");if(!e.url)throw new Error("No url defined.");const t=new this._abortControllerType;let s;e.abortSignal&&(e.abortSignal.onabort=()=>{t.abort(),s=new ne});let i=null;if(e.timeout){const c=e.timeout;i=setTimeout(()=>{t.abort(),this._logger.log(d.Warning,"Timeout from HTTP request."),s=new Lt},c)}e.content===""&&(e.content=void 0),e.content&&(e.headers=e.headers||{},qe(e.content)?e.headers["Content-Type"]="application/octet-stream":e.headers["Content-Type"]="text/plain;charset=UTF-8");let r;try{r=await this._fetchType(e.url,{body:e.content,cache:"no-cache",credentials:e.withCredentials===!0?"include":"same-origin",headers:{"X-Requested-With":"XMLHttpRequest",...e.headers},method:e.method,mode:"cors",redirect:"follow",signal:t.signal})}catch(c){throw s||(this._logger.log(d.Warning,`Error from HTTP request. ${c}.`),c)}finally{i&&clearTimeout(i),e.abortSignal&&(e.abortSignal.onabort=null)}if(!r.ok){const c=await nn(r,"text");throw new Ae(c||r.statusText,r.status)}const l=await nn(r,e.responseType);return new On(r.status,r.statusText,l)}getCookieString(e){let t="";return G.isNode&&this._jar&&this._jar.getCookies(e,(s,i)=>t=i.join("; ")),t}}function nn(n,e){let t;switch(e){case"arraybuffer":t=n.arrayBuffer();break;case"text":t=n.text();break;case"blob":case"document":case"json":throw new Error(`${e} is not supported.`);default:t=n.text();break}return t}class ci extends ct{constructor(e){super(),this._logger=e}send(e){return e.abortSignal&&e.abortSignal.aborted?Promise.reject(new ne):e.method?e.url?new Promise((t,s)=>{const i=new XMLHttpRequest;i.open(e.method,e.url,!0),i.withCredentials=e.withCredentials===void 0?!0:e.withCredentials,i.setRequestHeader("X-Requested-With","XMLHttpRequest"),e.content===""&&(e.content=void 0),e.content&&(qe(e.content)?i.setRequestHeader("Content-Type","application/octet-stream"):i.setRequestHeader("Content-Type","text/plain;charset=UTF-8"));const r=e.headers;r&&Object.keys(r).forEach(o=>{i.setRequestHeader(o,r[o])}),e.responseType&&(i.responseType=e.responseType),e.abortSignal&&(e.abortSignal.onabort=()=>{i.abort(),s(new ne)}),e.timeout&&(i.timeout=e.timeout),i.onload=()=>{e.abortSignal&&(e.abortSignal.onabort=null),i.status>=200&&i.status<300?t(new On(i.status,i.statusText,i.response||i.responseText)):s(new Ae(i.response||i.responseText||i.statusText,i.status))},i.onerror=()=>{this._logger.log(d.Warning,`Error from HTTP request. ${i.status}: ${i.statusText}.`),s(new Ae(i.statusText,i.status))},i.ontimeout=()=>{this._logger.log(d.Warning,"Timeout from HTTP request."),s(new Lt)},i.send(e.content)}):Promise.reject(new Error("No url defined.")):Promise.reject(new Error("No method defined."))}}class ai extends ct{constructor(e){if(super(),typeof fetch<"u"||G.isNode)this._httpClient=new li(e);else if(typeof XMLHttpRequest<"u")this._httpClient=new ci(e);else throw new Error("No usable HttpClient found.")}send(e){return e.abortSignal&&e.abortSignal.aborted?Promise.reject(new ne):e.method?e.url?this._httpClient.send(e):Promise.reject(new Error("No url defined.")):Promise.reject(new Error("No method defined."))}getCookieString(e){return this._httpClient.getCookieString(e)}}class Q{static write(e){return`${e}${Q.RecordSeparator}`}static parse(e){if(e[e.length-1]!==Q.RecordSeparator)throw new Error("Message is incomplete.");const t=e.split(Q.RecordSeparator);return t.pop(),t}}Q.RecordSeparatorCode=30;Q.RecordSeparator=String.fromCharCode(Q.RecordSeparatorCode);class hi{writeHandshakeRequest(e){return Q.write(JSON.stringify(e))}parseHandshakeResponse(e){let t,s;if(qe(e)){const l=new Uint8Array(e),c=l.indexOf(Q.RecordSeparatorCode);if(c===-1)throw new Error("Message is incomplete.");const a=c+1;t=String.fromCharCode.apply(null,Array.prototype.slice.call(l.slice(0,a))),s=l.byteLength>a?l.slice(a).buffer:null}else{const l=e,c=l.indexOf(Q.RecordSeparator);if(c===-1)throw new Error("Message is incomplete.");const a=c+1;t=l.substring(0,a),s=l.length>a?l.substring(a):null}const i=Q.parse(t),r=JSON.parse(i[0]);if(r.type)throw new Error("Expected a handshake response from the server.");return[s,r]}}var O;(function(n){n[n.Invocation=1]="Invocation",n[n.StreamItem=2]="StreamItem",n[n.Completion=3]="Completion",n[n.StreamInvocation=4]="StreamInvocation",n[n.CancelInvocation=5]="CancelInvocation",n[n.Ping=6]="Ping",n[n.Close=7]="Close"})(O||(O={}));class ui{constructor(){this.observers=[]}next(e){for(const t of this.observers)t.next(e)}error(e){for(const t of this.observers)t.error&&t.error(e)}complete(){for(const e of this.observers)e.complete&&e.complete()}subscribe(e){return this.observers.push(e),new ti(this,e)}}const fi=30*1e3,di=15*1e3;var H;(function(n){n.Disconnected="Disconnected",n.Connecting="Connecting",n.Connected="Connected",n.Disconnecting="Disconnecting",n.Reconnecting="Reconnecting"})(H||(H={}));class $t{constructor(e,t,s,i){this._nextKeepAlive=0,this._freezeEventListener=()=>{this._logger.log(d.Warning,"The page is being frozen, this will likely lead to the connection being closed and messages being lost. For more information see the docs at https://docs.microsoft.com/aspnet/core/signalr/javascript-client#bsleep")},J.isRequired(e,"connection"),J.isRequired(t,"logger"),J.isRequired(s,"protocol"),this.serverTimeoutInMilliseconds=fi,this.keepAliveIntervalInMilliseconds=di,this._logger=t,this._protocol=s,this.connection=e,this._reconnectPolicy=i,this._handshakeProtocol=new hi,this.connection.onreceive=r=>this._processIncomingData(r),this.connection.onclose=r=>this._connectionClosed(r),this._callbacks={},this._methods={},this._closedCallbacks=[],this._reconnectingCallbacks=[],this._reconnectedCallbacks=[],this._invocationId=0,this._receivedHandshakeResponse=!1,this._connectionState=H.Disconnected,this._connectionStarted=!1,this._cachedPingMessage=this._protocol.writeMessage({type:O.Ping})}static create(e,t,s,i){return new $t(e,t,s,i)}get state(){return this._connectionState}get connectionId(){return this.connection&&this.connection.connectionId||null}get baseUrl(){return this.connection.baseUrl||""}set baseUrl(e){if(this._connectionState!==H.Disconnected&&this._connectionState!==H.Reconnecting)throw new Error("The HubConnection must be in the Disconnected or Reconnecting state to change the url.");if(!e)throw new Error("The HubConnection url must be a valid url.");this.connection.baseUrl=e}start(){return this._startPromise=this._startWithStateTransitions(),this._startPromise}async _startWithStateTransitions(){if(this._connectionState!==H.Disconnected)return Promise.reject(new Error("Cannot start a HubConnection that is not in the 'Disconnected' state."));this._connectionState=H.Connecting,this._logger.log(d.Debug,"Starting HubConnection.");try{await this._startInternal(),G.isBrowser&&window.document.addEventListener("freeze",this._freezeEventListener),this._connectionState=H.Connected,this._connectionStarted=!0,this._logger.log(d.Debug,"HubConnection connected successfully.")}catch(e){return this._connectionState=H.Disconnected,this._logger.log(d.Debug,`HubConnection failed to start successfully because of error '${e}'.`),Promise.reject(e)}}async _startInternal(){this._stopDuringStartError=void 0,this._receivedHandshakeResponse=!1;const e=new Promise((t,s)=>{this._handshakeResolver=t,this._handshakeRejecter=s});await this.connection.start(this._protocol.transferFormat);try{const t={protocol:this._protocol.name,version:this._protocol.version};if(this._logger.log(d.Debug,"Sending handshake request."),await this._sendMessage(this._handshakeProtocol.writeHandshakeRequest(t)),this._logger.log(d.Information,`Using HubProtocol '${this._protocol.name}'.`),this._cleanupTimeout(),this._resetTimeoutPeriod(),this._resetKeepAliveInterval(),await e,this._stopDuringStartError)throw this._stopDuringStartError;this.connection.features.inherentKeepAlive||await this._sendMessage(this._cachedPingMessage)}catch(t){throw this._logger.log(d.Debug,`Hub handshake failed with error '${t}' during start(). Stopping HubConnection.`),this._cleanupTimeout(),this._cleanupPingTimer(),await this.connection.stop(t),t}}async stop(){const e=this._startPromise;this._stopPromise=this._stopInternal(),await this._stopPromise;try{await e}catch{}}_stopInternal(e){return this._connectionState===H.Disconnected?(this._logger.log(d.Debug,`Call to HubConnection.stop(${e}) ignored because it is already in the disconnected state.`),Promise.resolve()):this._connectionState===H.Disconnecting?(this._logger.log(d.Debug,`Call to HttpConnection.stop(${e}) ignored because the connection is already in the disconnecting state.`),this._stopPromise):(this._connectionState=H.Disconnecting,this._logger.log(d.Debug,"Stopping HubConnection."),this._reconnectDelayHandle?(this._logger.log(d.Debug,"Connection stopped during reconnect delay. Done reconnecting."),clearTimeout(this._reconnectDelayHandle),this._reconnectDelayHandle=void 0,this._completeClose(),Promise.resolve()):(this._cleanupTimeout(),this._cleanupPingTimer(),this._stopDuringStartError=e||new ne("The connection was stopped before the hub handshake could complete."),this.connection.stop(e)))}stream(e,...t){const[s,i]=this._replaceStreamingParams(t),r=this._createStreamInvocation(e,t,i);let o;const l=new ui;return l.cancelCallback=()=>{const c=this._createCancelInvocation(r.invocationId);return delete this._callbacks[r.invocationId],o.then(()=>this._sendWithProtocol(c))},this._callbacks[r.invocationId]=(c,a)=>{if(a){l.error(a);return}else c&&(c.type===O.Completion?c.error?l.error(new Error(c.error)):l.complete():l.next(c.item))},o=this._sendWithProtocol(r).catch(c=>{l.error(c),delete this._callbacks[r.invocationId]}),this._launchStreams(s,o),l}_sendMessage(e){return this._resetKeepAliveInterval(),this.connection.send(e)}_sendWithProtocol(e){return this._sendMessage(this._protocol.writeMessage(e))}send(e,...t){const[s,i]=this._replaceStreamingParams(t),r=this._sendWithProtocol(this._createInvocation(e,t,!0,i));return this._launchStreams(s,r),r}invoke(e,...t){const[s,i]=this._replaceStreamingParams(t),r=this._createInvocation(e,t,!1,i);return new Promise((l,c)=>{this._callbacks[r.invocationId]=(h,u)=>{if(u){c(u);return}else h&&(h.type===O.Completion?h.error?c(new Error(h.error)):l(h.result):c(new Error(`Unexpected message type: ${h.type}`)))};const a=this._sendWithProtocol(r).catch(h=>{c(h),delete this._callbacks[r.invocationId]});this._launchStreams(s,a)})}on(e,t){!e||!t||(e=e.toLowerCase(),this._methods[e]||(this._methods[e]=[]),this._methods[e].indexOf(t)===-1&&this._methods[e].push(t))}off(e,t){if(!e)return;e=e.toLowerCase();const s=this._methods[e];if(s)if(t){const i=s.indexOf(t);i!==-1&&(s.splice(i,1),s.length===0&&delete this._methods[e])}else delete this._methods[e]}onclose(e){e&&this._closedCallbacks.push(e)}onreconnecting(e){e&&this._reconnectingCallbacks.push(e)}onreconnected(e){e&&this._reconnectedCallbacks.push(e)}_processIncomingData(e){if(this._cleanupTimeout(),this._receivedHandshakeResponse||(e=this._processHandshakeResponse(e),this._receivedHandshakeResponse=!0),e){const t=this._protocol.parseMessages(e,this._logger);for(const s of t)switch(s.type){case O.Invocation:this._invokeClientMethod(s);break;case O.StreamItem:case O.Completion:{const i=this._callbacks[s.invocationId];if(i){s.type===O.Completion&&delete this._callbacks[s.invocationId];try{i(s)}catch(r){this._logger.log(d.Error,`Stream callback threw error: ${tn(r)}`)}}break}case O.Ping:break;case O.Close:{this._logger.log(d.Information,"Close message received from server.");const i=s.error?new Error("Server returned an error on close: "+s.error):void 0;s.allowReconnect===!0?this.connection.stop(i):this._stopPromise=this._stopInternal(i);break}default:this._logger.log(d.Warning,`Invalid message type: ${s.type}.`);break}}this._resetTimeoutPeriod()}_processHandshakeResponse(e){let t,s;try{[s,t]=this._handshakeProtocol.parseHandshakeResponse(e)}catch(i){const r="Error parsing handshake response: "+i;this._logger.log(d.Error,r);const o=new Error(r);throw this._handshakeRejecter(o),o}if(t.error){const i="Server returned handshake error: "+t.error;this._logger.log(d.Error,i);const r=new Error(i);throw this._handshakeRejecter(r),r}else this._logger.log(d.Debug,"Server handshake complete.");return this._handshakeResolver(),s}_resetKeepAliveInterval(){this.connection.features.inherentKeepAlive||(this._nextKeepAlive=new Date().getTime()+this.keepAliveIntervalInMilliseconds,this._cleanupPingTimer())}_resetTimeoutPeriod(){if((!this.connection.features||!this.connection.features.inherentKeepAlive)&&(this._timeoutHandle=setTimeout(()=>this.serverTimeout(),this.serverTimeoutInMilliseconds),this._pingServerHandle===void 0)){let e=this._nextKeepAlive-new Date().getTime();e<0&&(e=0),this._pingServerHandle=setTimeout(async()=>{if(this._connectionState===H.Connected)try{await this._sendMessage(this._cachedPingMessage)}catch{this._cleanupPingTimer()}},e)}}serverTimeout(){this.connection.stop(new Error("Server timeout elapsed without receiving a message from the server."))}async _invokeClientMethod(e){const t=e.target.toLowerCase(),s=this._methods[t];if(!s){this._logger.log(d.Warning,`No client method with the name '${t}' found.`),e.invocationId&&(this._logger.log(d.Warning,`No result given for '${t}' method and invocation ID '${e.invocationId}'.`),await this._sendWithProtocol(this._createCompletionMessage(e.invocationId,"Client didn't provide a result.",null)));return}const i=s.slice(),r=!!e.invocationId;let o,l,c;for(const a of i)try{const h=o;o=await a.apply(this,e.arguments),r&&o&&h&&(this._logger.log(d.Error,`Multiple results provided for '${t}'. Sending error to server.`),c=this._createCompletionMessage(e.invocationId,"Client provided multiple results.",null)),l=void 0}catch(h){l=h,this._logger.log(d.Error,`A callback for the method '${t}' threw error '${h}'.`)}c?await this._sendWithProtocol(c):r?(l?c=this._createCompletionMessage(e.invocationId,`${l}`,null):o!==void 0?c=this._createCompletionMessage(e.invocationId,null,o):(this._logger.log(d.Warning,`No result given for '${t}' method and invocation ID '${e.invocationId}'.`),c=this._createCompletionMessage(e.invocationId,"Client didn't provide a result.",null)),await this._sendWithProtocol(c)):o&&this._logger.log(d.Error,`Result given for '${t}' method but server is not expecting a result.`)}_connectionClosed(e){this._logger.log(d.Debug,`HubConnection.connectionClosed(${e}) called while in state ${this._connectionState}.`),this._stopDuringStartError=this._stopDuringStartError||e||new ne("The underlying connection was closed before the hub handshake could complete."),this._handshakeResolver&&this._handshakeResolver(),this._cancelCallbacksWithError(e||new Error("Invocation canceled due to the underlying connection being closed.")),this._cleanupTimeout(),this._cleanupPingTimer(),this._connectionState===H.Disconnecting?this._completeClose(e):this._connectionState===H.Connected&&this._reconnectPolicy?this._reconnect(e):this._connectionState===H.Connected&&this._completeClose(e)}_completeClose(e){if(this._connectionStarted){this._connectionState=H.Disconnected,this._connectionStarted=!1,G.isBrowser&&window.document.removeEventListener("freeze",this._freezeEventListener);try{this._closedCallbacks.forEach(t=>t.apply(this,[e]))}catch(t){this._logger.log(d.Error,`An onclose callback called with error '${e}' threw error '${t}'.`)}}}async _reconnect(e){const t=Date.now();let s=0,i=e!==void 0?e:new Error("Attempting to reconnect due to a unknown error."),r=this._getNextRetryDelay(s++,0,i);if(r===null){this._logger.log(d.Debug,"Connection not reconnecting because the IRetryPolicy returned null on the first reconnect attempt."),this._completeClose(e);return}if(this._connectionState=H.Reconnecting,e?this._logger.log(d.Information,`Connection reconnecting because of error '${e}'.`):this._logger.log(d.Information,"Connection reconnecting."),this._reconnectingCallbacks.length!==0){try{this._reconnectingCallbacks.forEach(o=>o.apply(this,[e]))}catch(o){this._logger.log(d.Error,`An onreconnecting callback called with error '${e}' threw error '${o}'.`)}if(this._connectionState!==H.Reconnecting){this._logger.log(d.Debug,"Connection left the reconnecting state in onreconnecting callback. Done reconnecting.");return}}for(;r!==null;){if(this._logger.log(d.Information,`Reconnect attempt number ${s} will start in ${r} ms.`),await new Promise(o=>{this._reconnectDelayHandle=setTimeout(o,r)}),this._reconnectDelayHandle=void 0,this._connectionState!==H.Reconnecting){this._logger.log(d.Debug,"Connection left the reconnecting state during reconnect delay. Done reconnecting.");return}try{if(await this._startInternal(),this._connectionState=H.Connected,this._logger.log(d.Information,"HubConnection reconnected successfully."),this._reconnectedCallbacks.length!==0)try{this._reconnectedCallbacks.forEach(o=>o.apply(this,[this.connection.connectionId]))}catch(o){this._logger.log(d.Error,`An onreconnected callback called with connectionId '${this.connection.connectionId}; threw error '${o}'.`)}return}catch(o){if(this._logger.log(d.Information,`Reconnect attempt failed because of error '${o}'.`),this._connectionState!==H.Reconnecting){this._logger.log(d.Debug,`Connection moved to the '${this._connectionState}' from the reconnecting state during reconnect attempt. Done reconnecting.`),this._connectionState===H.Disconnecting&&this._completeClose();return}i=o instanceof Error?o:new Error(o.toString()),r=this._getNextRetryDelay(s++,Date.now()-t,i)}}this._logger.log(d.Information,`Reconnect retries have been exhausted after ${Date.now()-t} ms and ${s} failed attempts. Connection disconnecting.`),this._completeClose()}_getNextRetryDelay(e,t,s){try{return this._reconnectPolicy.nextRetryDelayInMilliseconds({elapsedMilliseconds:t,previousRetryCount:e,retryReason:s})}catch(i){return this._logger.log(d.Error,`IRetryPolicy.nextRetryDelayInMilliseconds(${e}, ${t}) threw error '${i}'.`),null}}_cancelCallbacksWithError(e){const t=this._callbacks;this._callbacks={},Object.keys(t).forEach(s=>{const i=t[s];try{i(null,e)}catch(r){this._logger.log(d.Error,`Stream 'error' callback called with '${e}' threw error: ${tn(r)}`)}})}_cleanupPingTimer(){this._pingServerHandle&&(clearTimeout(this._pingServerHandle),this._pingServerHandle=void 0)}_cleanupTimeout(){this._timeoutHandle&&clearTimeout(this._timeoutHandle)}_createInvocation(e,t,s,i){if(s)return i.length!==0?{arguments:t,streamIds:i,target:e,type:O.Invocation}:{arguments:t,target:e,type:O.Invocation};{const r=this._invocationId;return this._invocationId++,i.length!==0?{arguments:t,invocationId:r.toString(),streamIds:i,target:e,type:O.Invocation}:{arguments:t,invocationId:r.toString(),target:e,type:O.Invocation}}}_launchStreams(e,t){if(e.length!==0){t||(t=Promise.resolve());for(const s in e)e[s].subscribe({complete:()=>{t=t.then(()=>this._sendWithProtocol(this._createCompletionMessage(s)))},error:i=>{let r;i instanceof Error?r=i.message:i&&i.toString?r=i.toString():r="Unknown error",t=t.then(()=>this._sendWithProtocol(this._createCompletionMessage(s,r)))},next:i=>{t=t.then(()=>this._sendWithProtocol(this._createStreamItemMessage(s,i)))}})}}_replaceStreamingParams(e){const t=[],s=[];for(let i=0;i<e.length;i++){const r=e[i];if(this._isObservable(r)){const o=this._invocationId;this._invocationId++,t[o]=r,s.push(o.toString()),e.splice(i,1)}}return[t,s]}_isObservable(e){return e&&e.subscribe&&typeof e.subscribe=="function"}_createStreamInvocation(e,t,s){const i=this._invocationId;return this._invocationId++,s.length!==0?{arguments:t,invocationId:i.toString(),streamIds:s,target:e,type:O.StreamInvocation}:{arguments:t,invocationId:i.toString(),target:e,type:O.StreamInvocation}}_createCancelInvocation(e){return{invocationId:e,type:O.CancelInvocation}}_createStreamItemMessage(e,t){return{invocationId:e,item:t,type:O.StreamItem}}_createCompletionMessage(e,t,s){return t?{error:t,invocationId:e,type:O.Completion}:{invocationId:e,result:s,type:O.Completion}}}const gi=[0,2e3,1e4,3e4,null];class sn{constructor(e){this._retryDelays=e!==void 0?[...e,null]:gi}nextRetryDelayInMilliseconds(e){return this._retryDelays[e.previousRetryCount]}}class ke{}ke.Authorization="Authorization";ke.Cookie="Cookie";class _i extends ct{constructor(e,t){super(),this._innerClient=e,this._accessTokenFactory=t}async send(e){let t=!0;this._accessTokenFactory&&(!this._accessToken||e.url&&e.url.indexOf("/negotiate?")>0)&&(t=!1,this._accessToken=await this._accessTokenFactory()),this._setAuthorizationHeader(e);const s=await this._innerClient.send(e);return t&&s.statusCode===401&&this._accessTokenFactory?(this._accessToken=await this._accessTokenFactory(),this._setAuthorizationHeader(e),await this._innerClient.send(e)):s}_setAuthorizationHeader(e){e.headers||(e.headers={}),this._accessToken?e.headers[ke.Authorization]=`Bearer ${this._accessToken}`:this._accessTokenFactory&&e.headers[ke.Authorization]&&delete e.headers[ke.Authorization]}getCookieString(e){return this._innerClient.getCookieString(e)}}var q;(function(n){n[n.None=0]="None",n[n.WebSockets=1]="WebSockets",n[n.ServerSentEvents=2]="ServerSentEvents",n[n.LongPolling=4]="LongPolling"})(q||(q={}));var V;(function(n){n[n.Text=1]="Text",n[n.Binary=2]="Binary"})(V||(V={}));let pi=class{constructor(){this._isAborted=!1,this.onabort=null}abort(){this._isAborted||(this._isAborted=!0,this.onabort&&this.onabort())}get signal(){return this}get aborted(){return this._isAborted}};class rn{constructor(e,t,s){this._httpClient=e,this._logger=t,this._pollAbort=new pi,this._options=s,this._running=!1,this.onreceive=null,this.onclose=null}get pollAborted(){return this._pollAbort.aborted}async connect(e,t){if(J.isRequired(e,"url"),J.isRequired(t,"transferFormat"),J.isIn(t,V,"transferFormat"),this._url=e,this._logger.log(d.Trace,"(LongPolling transport) Connecting."),t===V.Binary&&typeof XMLHttpRequest<"u"&&typeof new XMLHttpRequest().responseType!="string")throw new Error("Binary protocols over XmlHttpRequest not implementing advanced features are not supported.");const[s,i]=Re(),r={[s]:i,...this._options.headers},o={abortSignal:this._pollAbort.signal,headers:r,timeout:1e5,withCredentials:this._options.withCredentials};t===V.Binary&&(o.responseType="arraybuffer");const l=`${e}&_=${Date.now()}`;this._logger.log(d.Trace,`(LongPolling transport) polling: ${l}.`);const c=await this._httpClient.get(l,o);c.statusCode!==200?(this._logger.log(d.Error,`(LongPolling transport) Unexpected response code: ${c.statusCode}.`),this._closeError=new Ae(c.statusText||"",c.statusCode),this._running=!1):this._running=!0,this._receiving=this._poll(this._url,o)}async _poll(e,t){try{for(;this._running;)try{const s=`${e}&_=${Date.now()}`;this._logger.log(d.Trace,`(LongPolling transport) polling: ${s}.`);const i=await this._httpClient.get(s,t);i.statusCode===204?(this._logger.log(d.Information,"(LongPolling transport) Poll terminated by server."),this._running=!1):i.statusCode!==200?(this._logger.log(d.Error,`(LongPolling transport) Unexpected response code: ${i.statusCode}.`),this._closeError=new Ae(i.statusText||"",i.statusCode),this._running=!1):i.content?(this._logger.log(d.Trace,`(LongPolling transport) data received. ${ze(i.content,this._options.logMessageContent)}.`),this.onreceive&&this.onreceive(i.content)):this._logger.log(d.Trace,"(LongPolling transport) Poll timed out, reissuing.")}catch(s){this._running?s instanceof Lt?this._logger.log(d.Trace,"(LongPolling transport) Poll timed out, reissuing."):(this._closeError=s,this._running=!1):this._logger.log(d.Trace,`(LongPolling transport) Poll errored after shutdown: ${s.message}`)}}finally{this._logger.log(d.Trace,"(LongPolling transport) Polling complete."),this.pollAborted||this._raiseOnClose()}}async send(e){return this._running?Hn(this._logger,"LongPolling",this._httpClient,this._url,e,this._options):Promise.reject(new Error("Cannot send until the transport is connected"))}async stop(){this._logger.log(d.Trace,"(LongPolling transport) Stopping polling."),this._running=!1,this._pollAbort.abort();try{await this._receiving,this._logger.log(d.Trace,`(LongPolling transport) sending DELETE request to ${this._url}.`);const e={},[t,s]=Re();e[t]=s;const i={headers:{...e,...this._options.headers},timeout:this._options.timeout,withCredentials:this._options.withCredentials};await this._httpClient.delete(this._url,i),this._logger.log(d.Trace,"(LongPolling transport) DELETE request sent.")}finally{this._logger.log(d.Trace,"(LongPolling transport) Stop finished."),this._raiseOnClose()}}_raiseOnClose(){if(this.onclose){let e="(LongPolling transport) Firing onclose event.";this._closeError&&(e+=" Error: "+this._closeError),this._logger.log(d.Trace,e),this.onclose(this._closeError)}}}class mi{constructor(e,t,s,i){this._httpClient=e,this._accessToken=t,this._logger=s,this._options=i,this.onreceive=null,this.onclose=null}async connect(e,t){return J.isRequired(e,"url"),J.isRequired(t,"transferFormat"),J.isIn(t,V,"transferFormat"),this._logger.log(d.Trace,"(SSE transport) Connecting."),this._url=e,this._accessToken&&(e+=(e.indexOf("?")<0?"?":"&")+`access_token=${encodeURIComponent(this._accessToken)}`),new Promise((s,i)=>{let r=!1;if(t!==V.Text){i(new Error("The Server-Sent Events transport only supports the 'Text' transfer format"));return}let o;if(G.isBrowser||G.isWebWorker)o=new this._options.EventSource(e,{withCredentials:this._options.withCredentials});else{const l=this._httpClient.getCookieString(e),c={};c.Cookie=l;const[a,h]=Re();c[a]=h,o=new this._options.EventSource(e,{withCredentials:this._options.withCredentials,headers:{...c,...this._options.headers}})}try{o.onmessage=l=>{if(this.onreceive)try{this._logger.log(d.Trace,`(SSE transport) data received. ${ze(l.data,this._options.logMessageContent)}.`),this.onreceive(l.data)}catch(c){this._close(c);return}},o.onerror=l=>{r?this._close():i(new Error("EventSource failed to connect. The connection could not be found on the server, either the connection ID is not present on the server, or a proxy is refusing/buffering the connection. If you have multiple servers check that sticky sessions are enabled."))},o.onopen=()=>{this._logger.log(d.Information,`SSE connected to ${this._url}`),this._eventSource=o,r=!0,s()}}catch(l){i(l);return}})}async send(e){return this._eventSource?Hn(this._logger,"SSE",this._httpClient,this._url,e,this._options):Promise.reject(new Error("Cannot send until the transport is connected"))}stop(){return this._close(),Promise.resolve()}_close(e){this._eventSource&&(this._eventSource.close(),this._eventSource=void 0,this.onclose&&this.onclose(e))}}class bi{constructor(e,t,s,i,r,o){this._logger=s,this._accessTokenFactory=t,this._logMessageContent=i,this._webSocketConstructor=r,this._httpClient=e,this.onreceive=null,this.onclose=null,this._headers=o}async connect(e,t){J.isRequired(e,"url"),J.isRequired(t,"transferFormat"),J.isIn(t,V,"transferFormat"),this._logger.log(d.Trace,"(WebSockets transport) Connecting.");let s;return this._accessTokenFactory&&(s=await this._accessTokenFactory()),new Promise((i,r)=>{e=e.replace(/^http/,"ws");let o;const l=this._httpClient.getCookieString(e);let c=!1;if(G.isNode||G.isReactNative){const a={},[h,u]=Re();a[h]=u,s&&(a[ke.Authorization]=`Bearer ${s}`),l&&(a[ke.Cookie]=l),o=new this._webSocketConstructor(e,void 0,{headers:{...a,...this._headers}})}else s&&(e+=(e.indexOf("?")<0?"?":"&")+`access_token=${encodeURIComponent(s)}`);o||(o=new this._webSocketConstructor(e)),t===V.Binary&&(o.binaryType="arraybuffer"),o.onopen=a=>{this._logger.log(d.Information,`WebSocket connected to ${e}.`),this._webSocket=o,c=!0,i()},o.onerror=a=>{let h=null;typeof ErrorEvent<"u"&&a instanceof ErrorEvent?h=a.error:h="There was an error with the transport",this._logger.log(d.Information,`(WebSockets transport) ${h}.`)},o.onmessage=a=>{if(this._logger.log(d.Trace,`(WebSockets transport) data received. ${ze(a.data,this._logMessageContent)}.`),this.onreceive)try{this.onreceive(a.data)}catch(h){this._close(h);return}},o.onclose=a=>{if(c)this._close(a);else{let h=null;typeof ErrorEvent<"u"&&a instanceof ErrorEvent?h=a.error:h="WebSocket failed to connect. The connection could not be found on the server, either the endpoint may not be a SignalR endpoint, the connection ID is not present on the server, or there is a proxy blocking WebSockets. If you have multiple servers check that sticky sessions are enabled.",r(new Error(h))}}})}send(e){return this._webSocket&&this._webSocket.readyState===this._webSocketConstructor.OPEN?(this._logger.log(d.Trace,`(WebSockets transport) sending data. ${ze(e,this._logMessageContent)}.`),this._webSocket.send(e),Promise.resolve()):Promise.reject("WebSocket is not in the OPEN state")}stop(){return this._webSocket&&this._close(void 0),Promise.resolve()}_close(e){this._webSocket&&(this._webSocket.onclose=()=>{},this._webSocket.onmessage=()=>{},this._webSocket.onerror=()=>{},this._webSocket.close(),this._webSocket=void 0),this._logger.log(d.Trace,"(WebSockets transport) socket closed."),this.onclose&&(this._isCloseEvent(e)&&(e.wasClean===!1||e.code!==1e3)?this.onclose(new Error(`WebSocket closed with status code: ${e.code} (${e.reason||"no reason given"}).`)):e instanceof Error?this.onclose(e):this.onclose())}_isCloseEvent(e){return e&&typeof e.wasClean=="boolean"&&typeof e.code=="number"}}const on=100;class wi{constructor(e,t={}){if(this._stopPromiseResolver=()=>{},this.features={},this._negotiateVersion=1,J.isRequired(e,"url"),this._logger=ei(t.logger),this.baseUrl=this._resolveUrl(e),t=t||{},t.logMessageContent=t.logMessageContent===void 0?!1:t.logMessageContent,typeof t.withCredentials=="boolean"||t.withCredentials===void 0)t.withCredentials=t.withCredentials===void 0?!0:t.withCredentials;else throw new Error("withCredentials option was not a 'boolean' or 'undefined' value");t.timeout=t.timeout===void 0?100*1e3:t.timeout;let s=null,i=null;if(G.isNode&&typeof require<"u"){const r=typeof __webpack_require__=="function"?__non_webpack_require__:require;s=r("ws"),i=r("eventsource")}!G.isNode&&typeof WebSocket<"u"&&!t.WebSocket?t.WebSocket=WebSocket:G.isNode&&!t.WebSocket&&s&&(t.WebSocket=s),!G.isNode&&typeof EventSource<"u"&&!t.EventSource?t.EventSource=EventSource:G.isNode&&!t.EventSource&&typeof i<"u"&&(t.EventSource=i),this._httpClient=new _i(t.httpClient||new ai(this._logger),t.accessTokenFactory),this._connectionState="Disconnected",this._connectionStarted=!1,this._options=t,this.onreceive=null,this.onclose=null}async start(e){if(e=e||V.Binary,J.isIn(e,V,"transferFormat"),this._logger.log(d.Debug,`Starting connection with transfer format '${V[e]}'.`),this._connectionState!=="Disconnected")return Promise.reject(new Error("Cannot start an HttpConnection that is not in the 'Disconnected' state."));if(this._connectionState="Connecting",this._startInternalPromise=this._startInternal(e),await this._startInternalPromise,this._connectionState==="Disconnecting"){const t="Failed to start the HttpConnection before stop() was called.";return this._logger.log(d.Error,t),await this._stopPromise,Promise.reject(new ne(t))}else if(this._connectionState!=="Connected"){const t="HttpConnection.startInternal completed gracefully but didn't enter the connection into the connected state!";return this._logger.log(d.Error,t),Promise.reject(new ne(t))}this._connectionStarted=!0}send(e){return this._connectionState!=="Connected"?Promise.reject(new Error("Cannot send data if the connection is not in the 'Connected' State.")):(this._sendQueue||(this._sendQueue=new Nt(this.transport)),this._sendQueue.send(e))}async stop(e){if(this._connectionState==="Disconnected")return this._logger.log(d.Debug,`Call to HttpConnection.stop(${e}) ignored because the connection is already in the disconnected state.`),Promise.resolve();if(this._connectionState==="Disconnecting")return this._logger.log(d.Debug,`Call to HttpConnection.stop(${e}) ignored because the connection is already in the disconnecting state.`),this._stopPromise;this._connectionState="Disconnecting",this._stopPromise=new Promise(t=>{this._stopPromiseResolver=t}),await this._stopInternal(e),await this._stopPromise}async _stopInternal(e){this._stopError=e;try{await this._startInternalPromise}catch{}if(this.transport){try{await this.transport.stop()}catch(t){this._logger.log(d.Error,`HttpConnection.transport.stop() threw error '${t}'.`),this._stopConnection()}this.transport=void 0}else this._logger.log(d.Debug,"HttpConnection.transport is undefined in HttpConnection.stop() because start() failed.")}async _startInternal(e){let t=this.baseUrl;this._accessTokenFactory=this._options.accessTokenFactory,this._httpClient._accessTokenFactory=this._accessTokenFactory;try{if(this._options.skipNegotiation)if(this._options.transport===q.WebSockets)this.transport=this._constructTransport(q.WebSockets),await this._startTransport(t,e);else throw new Error("Negotiation can only be skipped when using the WebSocket transport directly.");else{let s=null,i=0;do{if(s=await this._getNegotiationResponse(t),this._connectionState==="Disconnecting"||this._connectionState==="Disconnected")throw new ne("The connection was stopped during negotiation.");if(s.error)throw new Error(s.error);if(s.ProtocolVersion)throw new Error("Detected a connection attempt to an ASP.NET SignalR Server. This client only supports connecting to an ASP.NET Core SignalR Server. See https://aka.ms/signalr-core-differences for details.");if(s.url&&(t=s.url),s.accessToken){const r=s.accessToken;this._accessTokenFactory=()=>r,this._httpClient._accessToken=r,this._httpClient._accessTokenFactory=void 0}i++}while(s.url&&i<on);if(i===on&&s.url)throw new Error("Negotiate redirection limit exceeded.");await this._createTransport(t,this._options.transport,s,e)}this.transport instanceof rn&&(this.features.inherentKeepAlive=!0),this._connectionState==="Connecting"&&(this._logger.log(d.Debug,"The HttpConnection connected successfully."),this._connectionState="Connected")}catch(s){return this._logger.log(d.Error,"Failed to start the connection: "+s),this._connectionState="Disconnected",this.transport=void 0,this._stopPromiseResolver(),Promise.reject(s)}}async _getNegotiationResponse(e){const t={},[s,i]=Re();t[s]=i;const r=this._resolveNegotiateUrl(e);this._logger.log(d.Debug,`Sending negotiation request: ${r}.`);try{const o=await this._httpClient.post(r,{content:"",headers:{...t,...this._options.headers},timeout:this._options.timeout,withCredentials:this._options.withCredentials});if(o.statusCode!==200)return Promise.reject(new Error(`Unexpected status code returned from negotiate '${o.statusCode}'`));const l=JSON.parse(o.content);return(!l.negotiateVersion||l.negotiateVersion<1)&&(l.connectionToken=l.connectionId),l}catch(o){let l="Failed to complete negotiation with the server: "+o;return o instanceof Ae&&o.statusCode===404&&(l=l+" Either this is not a SignalR endpoint or there is a proxy blocking the connection."),this._logger.log(d.Error,l),Promise.reject(new Ys(l))}}_createConnectUrl(e,t){return t?e+(e.indexOf("?")===-1?"?":"&")+`id=${t}`:e}async _createTransport(e,t,s,i){let r=this._createConnectUrl(e,s.connectionToken);if(this._isITransport(t)){this._logger.log(d.Debug,"Connection was provided an instance of ITransport, using that directly."),this.transport=t,await this._startTransport(r,i),this.connectionId=s.connectionId;return}const o=[],l=s.availableTransports||[];let c=s;for(const a of l){const h=this._resolveTransportOrError(a,t,i);if(h instanceof Error)o.push(`${a.transport} failed:`),o.push(h);else if(this._isITransport(h)){if(this.transport=h,!c){try{c=await this._getNegotiationResponse(e)}catch(u){return Promise.reject(u)}r=this._createConnectUrl(e,c.connectionToken)}try{await this._startTransport(r,i),this.connectionId=c.connectionId;return}catch(u){if(this._logger.log(d.Error,`Failed to start the transport '${a.transport}': ${u}`),c=void 0,o.push(new Xs(`${a.transport} failed: ${u}`,q[a.transport])),this._connectionState!=="Connecting"){const f="Failed to select transport before stop() was called.";return this._logger.log(d.Debug,f),Promise.reject(new ne(f))}}}}return o.length>0?Promise.reject(new Ks(`Unable to connect to the server with any of the available transports. ${o.join(" ")}`,o)):Promise.reject(new Error("None of the transports supported by the client are supported by the server."))}_constructTransport(e){switch(e){case q.WebSockets:if(!this._options.WebSocket)throw new Error("'WebSocket' is not supported in your environment.");return new bi(this._httpClient,this._accessTokenFactory,this._logger,this._options.logMessageContent,this._options.WebSocket,this._options.headers||{});case q.ServerSentEvents:if(!this._options.EventSource)throw new Error("'EventSource' is not supported in your environment.");return new mi(this._httpClient,this._httpClient._accessToken,this._logger,this._options);case q.LongPolling:return new rn(this._httpClient,this._logger,this._options);default:throw new Error(`Unknown transport: ${e}.`)}}_startTransport(e,t){return this.transport.onreceive=this.onreceive,this.transport.onclose=s=>this._stopConnection(s),this.transport.connect(e,t)}_resolveTransportOrError(e,t,s){const i=q[e.transport];if(i==null)return this._logger.log(d.Debug,`Skipping transport '${e.transport}' because it is not supported by this client.`),new Error(`Skipping transport '${e.transport}' because it is not supported by this client.`);if(yi(t,i))if(e.transferFormats.map(o=>V[o]).indexOf(s)>=0){if(i===q.WebSockets&&!this._options.WebSocket||i===q.ServerSentEvents&&!this._options.EventSource)return this._logger.log(d.Debug,`Skipping transport '${q[i]}' because it is not supported in your environment.'`),new Js(`'${q[i]}' is not supported in your environment.`,i);this._logger.log(d.Debug,`Selecting transport '${q[i]}'.`);try{return this._constructTransport(i)}catch(o){return o}}else return this._logger.log(d.Debug,`Skipping transport '${q[i]}' because it does not support the requested transfer format '${V[s]}'.`),new Error(`'${q[i]}' does not support ${V[s]}.`);else return this._logger.log(d.Debug,`Skipping transport '${q[i]}' because it was disabled by the client.`),new Vs(`'${q[i]}' is disabled by the client.`,i)}_isITransport(e){return e&&typeof e=="object"&&"connect"in e}_stopConnection(e){if(this._logger.log(d.Debug,`HttpConnection.stopConnection(${e}) called while in state ${this._connectionState}.`),this.transport=void 0,e=this._stopError||e,this._stopError=void 0,this._connectionState==="Disconnected"){this._logger.log(d.Debug,`Call to HttpConnection.stopConnection(${e}) was ignored because the connection is already in the disconnected state.`);return}if(this._connectionState==="Connecting")throw this._logger.log(d.Warning,`Call to HttpConnection.stopConnection(${e}) was ignored because the connection is still in the connecting state.`),new Error(`HttpConnection.stopConnection(${e}) was called while the connection is still in the connecting state.`);if(this._connectionState==="Disconnecting"&&this._stopPromiseResolver(),e?this._logger.log(d.Error,`Connection disconnected with error '${e}'.`):this._logger.log(d.Information,"Connection disconnected."),this._sendQueue&&(this._sendQueue.stop().catch(t=>{this._logger.log(d.Error,`TransportSendQueue.stop() threw error '${t}'.`)}),this._sendQueue=void 0),this.connectionId=void 0,this._connectionState="Disconnected",this._connectionStarted){this._connectionStarted=!1;try{this.onclose&&this.onclose(e)}catch(t){this._logger.log(d.Error,`HttpConnection.onclose(${e}) threw error '${t}'.`)}}}_resolveUrl(e){if(e.lastIndexOf("https://",0)===0||e.lastIndexOf("http://",0)===0)return e;if(!G.isBrowser)throw new Error(`Cannot resolve '${e}'.`);const t=window.document.createElement("a");return t.href=e,this._logger.log(d.Information,`Normalizing '${e}' to '${t.href}'.`),t.href}_resolveNegotiateUrl(e){const t=e.indexOf("?");let s=e.substring(0,t===-1?e.length:t);return s[s.length-1]!=="/"&&(s+="/"),s+="negotiate",s+=t===-1?"":e.substring(t),s.indexOf("negotiateVersion")===-1&&(s+=t===-1?"?":"&",s+="negotiateVersion="+this._negotiateVersion),s}}function yi(n,e){return!n||(e&n)!==0}class Nt{constructor(e){this._transport=e,this._buffer=[],this._executing=!0,this._sendBufferedData=new Ve,this._transportResult=new Ve,this._sendLoopPromise=this._sendLoop()}send(e){return this._bufferData(e),this._transportResult||(this._transportResult=new Ve),this._transportResult.promise}stop(){return this._executing=!1,this._sendBufferedData.resolve(),this._sendLoopPromise}_bufferData(e){if(this._buffer.length&&typeof this._buffer[0]!=typeof e)throw new Error(`Expected data to be of type ${typeof this._buffer} but was of type ${typeof e}`);this._buffer.push(e),this._sendBufferedData.resolve()}async _sendLoop(){for(;;){if(await this._sendBufferedData.promise,!this._executing){this._transportResult&&this._transportResult.reject("Connection stopped.");break}this._sendBufferedData=new Ve;const e=this._transportResult;this._transportResult=void 0;const t=typeof this._buffer[0]=="string"?this._buffer.join(""):Nt._concatBuffers(this._buffer);this._buffer.length=0;try{await this._transport.send(t),e.resolve()}catch(s){e.reject(s)}}}static _concatBuffers(e){const t=e.map(r=>r.byteLength).reduce((r,o)=>r+o),s=new Uint8Array(t);let i=0;for(const r of e)s.set(new Uint8Array(r),i),i+=r.byteLength;return s.buffer}}class Ve{constructor(){this.promise=new Promise((e,t)=>[this._resolver,this._rejecter]=[e,t])}resolve(){this._resolver()}reject(e){this._rejecter(e)}}const vi="json";class ki{constructor(){this.name=vi,this.version=1,this.transferFormat=V.Text}parseMessages(e,t){if(typeof e!="string")throw new Error("Invalid input for JSON hub protocol. Expected a string.");if(!e)return[];t===null&&(t=We.instance);const s=Q.parse(e),i=[];for(const r of s){const o=JSON.parse(r);if(typeof o.type!="number")throw new Error("Invalid payload.");switch(o.type){case O.Invocation:this._isInvocationMessage(o);break;case O.StreamItem:this._isStreamItemMessage(o);break;case O.Completion:this._isCompletionMessage(o);break;case O.Ping:break;case O.Close:break;default:t.log(d.Information,"Unknown message type '"+o.type+"' ignored.");continue}i.push(o)}return i}writeMessage(e){return Q.write(JSON.stringify(e))}_isInvocationMessage(e){this._assertNotEmptyString(e.target,"Invalid payload for Invocation message."),e.invocationId!==void 0&&this._assertNotEmptyString(e.invocationId,"Invalid payload for Invocation message.")}_isStreamItemMessage(e){if(this._assertNotEmptyString(e.invocationId,"Invalid payload for StreamItem message."),e.item===void 0)throw new Error("Invalid payload for StreamItem message.")}_isCompletionMessage(e){if(e.result&&e.error)throw new Error("Invalid payload for Completion message.");!e.result&&e.error&&this._assertNotEmptyString(e.error,"Invalid payload for Completion message."),this._assertNotEmptyString(e.invocationId,"Invalid payload for Completion message.")}_assertNotEmptyString(e,t){if(typeof e!="string"||e==="")throw new Error(t)}}const Ei={trace:d.Trace,debug:d.Debug,info:d.Information,information:d.Information,warn:d.Warning,warning:d.Warning,error:d.Error,critical:d.Critical,none:d.None};function Ci(n){const e=Ei[n.toLowerCase()];if(typeof e<"u")return e;throw new Error(`Unknown log level: ${n}`)}class jn{configureLogging(e){if(J.isRequired(e,"logging"),Si(e))this.logger=e;else if(typeof e=="string"){const t=Ci(e);this.logger=new ot(t)}else this.logger=new ot(e);return this}withUrl(e,t){return J.isRequired(e,"url"),J.isNotEmpty(e,"url"),this.url=e,typeof t=="object"?this.httpConnectionOptions={...this.httpConnectionOptions,...t}:this.httpConnectionOptions={...this.httpConnectionOptions,transport:t},this}withHubProtocol(e){return J.isRequired(e,"protocol"),this.protocol=e,this}withAutomaticReconnect(e){if(this.reconnectPolicy)throw new Error("A reconnectPolicy has already been set.");return e?Array.isArray(e)?this.reconnectPolicy=new sn(e):this.reconnectPolicy=e:this.reconnectPolicy=new sn,this}build(){const e=this.httpConnectionOptions||{};if(e.logger===void 0&&(e.logger=this.logger),!this.url)throw new Error("The 'HubConnectionBuilder.withUrl' method must be called before building the connection.");const t=new wi(this.url,e);return $t.create(t,this.logger||We.instance,this.protocol||new ki,this.reconnectPolicy)}}function Si(n){return n.log!==void 0}function Ti(n){return n()}function Ii(n){n.forEach(Ti)}const Xe=[],ln=[],Ze=[],cn=[],Fn=Promise.resolve();let Ct=!1;function xi(){Ct||(Ct=!0,Fn.then(Bi))}function Di(){return xi(),Fn}function Pi(n){Ze.push(n)}const gt=new Set;let Ye=0;function Bi(){do{for(;Ye<Xe.length;){const n=Xe[Ye];Ye++,Ai(n.$$)}for(Xe.length=0,Ye=0;ln.length;)ln.pop()();for(let n=0;n<Ze.length;n+=1){const e=Ze[n];gt.has(e)||(gt.add(e),e())}Ze.length=0}while(Xe.length);for(;cn.length;)cn.pop()();Ct=!1,gt.clear()}function Ai(n){if(n.fragment!==null){n.update(),Ii(n.before_update);const e=n.dirty;n.dirty=[-1],n.fragment&&n.fragment.p(n.ctx,e),n.after_update.forEach(Pi)}}const Ri={root:null,rootMargin:"0px",threshold:0,unobserveOnEnter:!1},be=(n,e)=>new CustomEvent(n,{detail:e});function Wn(n,e={}){const{root:t,rootMargin:s,threshold:i,unobserveOnEnter:r}=Object.assign(Object.assign({},Ri),e);let o={x:void 0,y:void 0},l={vertical:void 0,horizontal:void 0};if(typeof IntersectionObserver<"u"&&n){const c=new IntersectionObserver((a,h)=>{a.forEach(u=>{o.y>u.boundingClientRect.y?l.vertical="up":l.vertical="down",o.x>u.boundingClientRect.x?l.horizontal="left":l.horizontal="right",o={y:u.boundingClientRect.y,x:u.boundingClientRect.x};const f={inView:u.isIntersecting,entry:u,scrollDirection:l,node:n,observer:h};n.dispatchEvent(be("inview_change",f)),n.dispatchEvent(be("change",f)),u.isIntersecting?(n.dispatchEvent(be("inview_enter",f)),n.dispatchEvent(be("enter",f)),r&&h.unobserve(n)):(n.dispatchEvent(be("inview_leave",f)),n.dispatchEvent(be("leave",f)))})},{root:t,rootMargin:s,threshold:i});return Di().then(()=>{n.dispatchEvent(be("inview_init",{observer:c,node:n})),n.dispatchEvent(be("init",{observer:c,node:n}))}),c.observe(n),{destroy(){c.unobserve(n)}}}}function Li(n){let e,t,s,i;return{c(){e=D("div"),T(e,"class",t=Ht(n[1]?"spacer-small":"spacer-big")+" svelte-1b6t5dl")},m(r,o){A(r,e,o),n[3](e),s||(i=[Pt(Wn.call(null,e)),Z(e,"inview_change",n[2])],s=!0)},p(r,[o]){o&2&&t!==(t=Ht(r[1]?"spacer-small":"spacer-big")+" svelte-1b6t5dl")&&T(e,"class",t)},i:S,o:S,d(r){r&&P(e),n[3](null),s=!1,ee(i)}}}function $i(n,e,t){let s,i;const r=({detail:l})=>{i||t(1,i=!l.inView)};function o(l){ve[l?"unshift":"push"](()=>{s=l,t(0,s)})}return t(1,i=!1),[s,i,r,o]}class Ni extends he{constructor(e){super(),ae(this,e,$i,Li,te,{})}}function Ui(n){let e,t,s,i,r;return{c(){e=D("div"),t=z(),s=D("div"),T(e,"class","anchor svelte-2f4clw"),T(s,"class","spacer svelte-2f4clw")},m(o,l){A(o,e,l),n[4](e),A(o,t,l),A(o,s,l),i||(r=[Pt(Wn.call(null,e)),Z(e,"inview_change",n[1])],i=!0)},p:S,i:S,o:S,d(o){o&&(P(e),P(t),P(s)),n[4](null),i=!1,ee(r)}}}function zn(){window.scrollTo(0,document.body.scrollHeight||document.documentElement.scrollHeight)}function Mi(n,e,t){const s=cs();let i,r;function o(){return i}const l=({detail:a})=>{i=a.inView,s("anchored",i)};function c(a){ve[a?"unshift":"push"](()=>{r=a,t(0,r)})}return i=!1,[r,l,o,zn,c]}class Oi extends he{constructor(e){super(),ae(this,e,Mi,Ui,te,{isCurrentlyAnchored:2,scrollToBottom:3})}get isCurrentlyAnchored(){return this.$$.ctx[2]}get scrollToBottom(){return zn}}class Hi{constructor(e,t){Y(this,"id");Y(this,"content");Y(this,"cursorPosition");this.id=e,this.content=t,this.cursorPosition=0}appendText(e){let t=e.match(/^\x1b\[([0-9]+)g$/i);if(t&&t.length==2){this.cursorPosition=parseInt(t[1])-1;return}if(t=e.toUpperCase().match(/^\x1b\[([0-9]*[JK])$/),t&&t.length==2){switch(t[1]){case"J":case"0J":this.removeAfterCursor();break;case"1J":this.removeBeforeCursor();break;case"2J":case"3J":this.removeLine();break;case"K":case"0K":this.removeAfterCursor();break;case"1K":this.removeBeforeCursor();break;case"2K":this.removeLine();break}return}this.content+=e,this.cursorPosition=this.content.length}removeAfterCursor(){this.content.substring(this.cursorPosition).indexOf(`
`)>=0||(this.content=this.content.substring(0,this.cursorPosition))}removeBeforeCursor(){this.content=this.content.substring(this.cursorPosition)}removeLine(){this.content.substring(0,1)==`
`?this.content=`
`:this.content=""}}var _t=globalThis&&globalThis.__makeTemplateObject||function(n,e){return Object.defineProperty?Object.defineProperty(n,"raw",{value:e}):n.raw=e,n},M;(function(n){n[n.EOS=0]="EOS",n[n.Text=1]="Text",n[n.Incomplete=2]="Incomplete",n[n.ESC=3]="ESC",n[n.Unknown=4]="Unknown",n[n.SGR=5]="SGR",n[n.OSCURL=6]="OSCURL"})(M||(M={}));class ji{constructor(){this.VERSION="6.0.2",this.setup_palettes(),this._use_classes=!1,this.bold=!1,this.faint=!1,this.italic=!1,this.underline=!1,this.fg=this.bg=null,this._buffer="",this._url_allowlist={http:1,https:1},this._escape_html=!0,this.boldStyle="font-weight:bold",this.faintStyle="opacity:0.7",this.italicStyle="font-style:italic",this.underlineStyle="text-decoration:underline"}set use_classes(e){this._use_classes=e}get use_classes(){return this._use_classes}set url_allowlist(e){this._url_allowlist=e}get url_allowlist(){return this._url_allowlist}set escape_html(e){this._escape_html=e}get escape_html(){return this._escape_html}set boldStyle(e){this._boldStyle=e}get boldStyle(){return this._boldStyle}set faintStyle(e){this._faintStyle=e}get faintStyle(){return this._faintStyle}set italicStyle(e){this._italicStyle=e}get italicStyle(){return this._italicStyle}set underlineStyle(e){this._underlineStyle=e}get underlineStyle(){return this._underlineStyle}setup_palettes(){this.ansi_colors=[[{rgb:[0,0,0],class_name:"ansi-black"},{rgb:[187,0,0],class_name:"ansi-red"},{rgb:[0,187,0],class_name:"ansi-green"},{rgb:[187,187,0],class_name:"ansi-yellow"},{rgb:[0,0,187],class_name:"ansi-blue"},{rgb:[187,0,187],class_name:"ansi-magenta"},{rgb:[0,187,187],class_name:"ansi-cyan"},{rgb:[255,255,255],class_name:"ansi-white"}],[{rgb:[85,85,85],class_name:"ansi-bright-black"},{rgb:[255,85,85],class_name:"ansi-bright-red"},{rgb:[0,255,0],class_name:"ansi-bright-green"},{rgb:[255,255,85],class_name:"ansi-bright-yellow"},{rgb:[85,85,255],class_name:"ansi-bright-blue"},{rgb:[255,85,255],class_name:"ansi-bright-magenta"},{rgb:[85,255,255],class_name:"ansi-bright-cyan"},{rgb:[255,255,255],class_name:"ansi-bright-white"}]],this.palette_256=[],this.ansi_colors.forEach(s=>{s.forEach(i=>{this.palette_256.push(i)})});let e=[0,95,135,175,215,255];for(let s=0;s<6;++s)for(let i=0;i<6;++i)for(let r=0;r<6;++r){let o={rgb:[e[s],e[i],e[r]],class_name:"truecolor"};this.palette_256.push(o)}let t=8;for(let s=0;s<24;++s,t+=10){let i={rgb:[t,t,t],class_name:"truecolor"};this.palette_256.push(i)}}escape_txt_for_html(e){return this._escape_html?e.replace(/[&<>"']/gm,t=>{if(t==="&")return"&amp;";if(t==="<")return"&lt;";if(t===">")return"&gt;";if(t==='"')return"&quot;";if(t==="'")return"&#x27;"}):e}append_buffer(e){var t=this._buffer+e;this._buffer=t}get_next_packet(){var e={kind:M.EOS,text:"",url:""},t=this._buffer.length;if(t==0)return e;var s=this._buffer.indexOf("\x1B");if(s==-1)return e.kind=M.Text,e.text=this._buffer,this._buffer="",e;if(s>0)return e.kind=M.Text,e.text=this._buffer.slice(0,s),this._buffer=this._buffer.slice(s),e;if(s==0){if(t<3)return e.kind=M.Incomplete,e;var i=this._buffer.charAt(1);if(i!="["&&i!="]"&&i!="(")return e.kind=M.ESC,e.text=this._buffer.slice(0,1),this._buffer=this._buffer.slice(1),e;if(i=="["){this._csi_regex||(this._csi_regex=an(hn||(hn=_t([`
                        ^                           # beginning of line
                                                    #
                                                    # First attempt
                        (?:                         # legal sequence
                          \x1B[                      # CSI
                          ([<-?]?)              # private-mode char
                          ([d;]*)                    # any digits or semicolons
                          ([ -/]?               # an intermediate modifier
                          [@-~])                # the command
                        )
                        |                           # alternate (second attempt)
                        (?:                         # illegal sequence
                          \x1B[                      # CSI
                          [ -~]*                # anything legal
                          ([\0-:])              # anything illegal
                        )
                    `],[`
                        ^                           # beginning of line
                                                    #
                                                    # First attempt
                        (?:                         # legal sequence
                          \\x1b\\[                      # CSI
                          ([\\x3c-\\x3f]?)              # private-mode char
                          ([\\d;]*)                    # any digits or semicolons
                          ([\\x20-\\x2f]?               # an intermediate modifier
                          [\\x40-\\x7e])                # the command
                        )
                        |                           # alternate (second attempt)
                        (?:                         # illegal sequence
                          \\x1b\\[                      # CSI
                          [\\x20-\\x7e]*                # anything legal
                          ([\\x00-\\x1f:])              # anything illegal
                        )
                    `]))));let o=this._buffer.match(this._csi_regex);if(o===null)return e.kind=M.Incomplete,e;if(o[4])return e.kind=M.ESC,e.text=this._buffer.slice(0,1),this._buffer=this._buffer.slice(1),e;o[1]!=""||o[3]!="m"?e.kind=M.Unknown:e.kind=M.SGR,e.text=o[2];var r=o[0].length;return this._buffer=this._buffer.slice(r),e}else if(i=="]"){if(t<4)return e.kind=M.Incomplete,e;if(this._buffer.charAt(2)!="8"||this._buffer.charAt(3)!=";")return e.kind=M.ESC,e.text=this._buffer.slice(0,1),this._buffer=this._buffer.slice(1),e;this._osc_st||(this._osc_st=Fi(un||(un=_t([`
                        (?:                         # legal sequence
                          (\x1B\\)                    # ESC                           |                           # alternate
                          (\x07)                      # BEL (what xterm did)
                        )
                        |                           # alternate (second attempt)
                        (                           # illegal sequence
                          [\0-]                 # anything illegal
                          |                           # alternate
                          [\b-]                 # anything illegal
                          |                           # alternate
                          [-]                 # anything illegal
                        )
                    `],[`
                        (?:                         # legal sequence
                          (\\x1b\\\\)                    # ESC \\
                          |                           # alternate
                          (\\x07)                      # BEL (what xterm did)
                        )
                        |                           # alternate (second attempt)
                        (                           # illegal sequence
                          [\\x00-\\x06]                 # anything illegal
                          |                           # alternate
                          [\\x08-\\x1a]                 # anything illegal
                          |                           # alternate
                          [\\x1c-\\x1f]                 # anything illegal
                        )
                    `])))),this._osc_st.lastIndex=0;{let c=this._osc_st.exec(this._buffer);if(c===null)return e.kind=M.Incomplete,e;if(c[3])return e.kind=M.ESC,e.text=this._buffer.slice(0,1),this._buffer=this._buffer.slice(1),e}{let c=this._osc_st.exec(this._buffer);if(c===null)return e.kind=M.Incomplete,e;if(c[3])return e.kind=M.ESC,e.text=this._buffer.slice(0,1),this._buffer=this._buffer.slice(1),e}this._osc_regex||(this._osc_regex=an(fn||(fn=_t([`
                        ^                           # beginning of line
                                                    #
                        \x1B]8;                    # OSC Hyperlink
                        [ -:<-~]*       # params (excluding ;)
                        ;                           # end of params
                        ([!-~]{0,512})        # URL capture
                        (?:                         # ST
                          (?:\x1B\\)                  # ESC                           |                           # alternate
                          (?:\x07)                    # BEL (what xterm did)
                        )
                        ([ -~]+)              # TEXT capture
                        \x1B]8;;                   # OSC Hyperlink End
                        (?:                         # ST
                          (?:\x1B\\)                  # ESC                           |                           # alternate
                          (?:\x07)                    # BEL (what xterm did)
                        )
                    `],[`
                        ^                           # beginning of line
                                                    #
                        \\x1b\\]8;                    # OSC Hyperlink
                        [\\x20-\\x3a\\x3c-\\x7e]*       # params (excluding ;)
                        ;                           # end of params
                        ([\\x21-\\x7e]{0,512})        # URL capture
                        (?:                         # ST
                          (?:\\x1b\\\\)                  # ESC \\
                          |                           # alternate
                          (?:\\x07)                    # BEL (what xterm did)
                        )
                        ([\\x20-\\x7e]+)              # TEXT capture
                        \\x1b\\]8;;                   # OSC Hyperlink End
                        (?:                         # ST
                          (?:\\x1b\\\\)                  # ESC \\
                          |                           # alternate
                          (?:\\x07)                    # BEL (what xterm did)
                        )
                    `]))));let o=this._buffer.match(this._osc_regex);if(o===null)return e.kind=M.ESC,e.text=this._buffer.slice(0,1),this._buffer=this._buffer.slice(1),e;e.kind=M.OSCURL,e.url=o[1],e.text=o[2];var r=o[0].length;return this._buffer=this._buffer.slice(r),e}else if(i=="(")return e.kind=M.Unknown,this._buffer=this._buffer.slice(3),e}}ansi_to_html(e){this.append_buffer(e);for(var t=[];;){var s=this.get_next_packet();if(s.kind==M.EOS||s.kind==M.Incomplete)break;s.kind==M.ESC||s.kind==M.Unknown||(s.kind==M.Text?t.push(this.transform_to_html(this.with_state(s))):s.kind==M.SGR?this.process_ansi(s):s.kind==M.OSCURL&&t.push(this.process_hyperlink(s)))}return t.join("")}with_state(e){return{bold:this.bold,faint:this.faint,italic:this.italic,underline:this.underline,fg:this.fg,bg:this.bg,text:e.text}}process_ansi(e){let t=e.text.split(";");for(;t.length>0;){let s=t.shift(),i=parseInt(s,10);if(isNaN(i)||i===0)this.fg=null,this.bg=null,this.bold=!1,this.faint=!1,this.italic=!1,this.underline=!1;else if(i===1)this.bold=!0;else if(i===2)this.faint=!0;else if(i===3)this.italic=!0;else if(i===4)this.underline=!0;else if(i===21)this.bold=!1;else if(i===22)this.faint=!1,this.bold=!1;else if(i===23)this.italic=!1;else if(i===24)this.underline=!1;else if(i===39)this.fg=null;else if(i===49)this.bg=null;else if(i>=30&&i<38)this.fg=this.ansi_colors[0][i-30];else if(i>=40&&i<48)this.bg=this.ansi_colors[0][i-40];else if(i>=90&&i<98)this.fg=this.ansi_colors[1][i-90];else if(i>=100&&i<108)this.bg=this.ansi_colors[1][i-100];else if((i===38||i===48)&&t.length>0){let r=i===38,o=t.shift();if(o==="5"&&t.length>0){let l=parseInt(t.shift(),10);l>=0&&l<=255&&(r?this.fg=this.palette_256[l]:this.bg=this.palette_256[l])}if(o==="2"&&t.length>2){let l=parseInt(t.shift(),10),c=parseInt(t.shift(),10),a=parseInt(t.shift(),10);if(l>=0&&l<=255&&c>=0&&c<=255&&a>=0&&a<=255){let h={rgb:[l,c,a],class_name:"truecolor"};r?this.fg=h:this.bg=h}}}}}transform_to_html(e){let t=e.text;if(t.length===0||(t=this.escape_txt_for_html(t),!e.bold&&!e.italic&&!e.underline&&e.fg===null&&e.bg===null))return t;let s=[],i=[],r=e.fg,o=e.bg;e.bold&&s.push(this._boldStyle),e.faint&&s.push(this._faintStyle),e.italic&&s.push(this._italicStyle),e.underline&&s.push(this._underlineStyle),this._use_classes?(r&&(r.class_name!=="truecolor"?i.push(`${r.class_name}-fg`):s.push(`color:rgb(${r.rgb.join(",")})`)),o&&(o.class_name!=="truecolor"?i.push(`${o.class_name}-bg`):s.push(`background-color:rgb(${o.rgb.join(",")})`))):(r&&s.push(`color:rgb(${r.rgb.join(",")})`),o&&s.push(`background-color:rgb(${o.rgb})`));let l="",c="";return i.length&&(l=` class="${i.join(" ")}"`),s.length&&(c=` style="${s.join(";")}"`),`<span${c}${l}>${t}</span>`}process_hyperlink(e){let t=e.url.split(":");return t.length<1||!this._url_allowlist[t[0]]?"":`<a href="${this.escape_txt_for_html(e.url)}">${this.escape_txt_for_html(e.text)}</a>`}}function an(n,...e){let t=n.raw[0],s=/^\s+|\s+\n|\s*#[\s\S]*?\n|\n/gm,i=t.replace(s,"");return new RegExp(i)}function Fi(n,...e){let t=n.raw[0],s=/^\s+|\s+\n|\s*#[\s\S]*?\n|\n/gm,i=t.replace(s,"");return new RegExp(i,"g")}var hn,un,fn;function Wi(n){let e,t=dn.ansi_to_html(n[0].content)+"",s;return{c(){e=D("span"),T(e,"id",s=`span_${n[0].id}`)},m(i,r){A(i,e,r),e.innerHTML=t},p(i,[r]){r&1&&t!==(t=dn.ansi_to_html(i[0].content)+"")&&(e.innerHTML=t),r&1&&s!==(s=`span_${i[0].id}`)&&T(e,"id",s)},i:S,o:S,d(i){i&&P(e)}}}const dn=new ji;function zi(n,e,t){let{line:s}=e;return n.$$set=i=>{"line"in i&&t(0,s=i.line)},[s]}class qi extends he{constructor(e){super(),ae(this,e,zi,Wi,te,{line:0})}}function gn(n){let e,t,s;return{c(){e=D("button"),e.innerHTML='Latest <img alt="" src="/logo_white.svg" class="svelte-1kqed01"/>',T(e,"class","svelte-1kqed01")},m(i,r){A(i,e,r),n[3](e),t||(s=Z(e,"click",n[2]),t=!0)},p:S,d(i){i&&P(e),n[3](null),t=!1,s()}}}function Gi(n){let e,t,s,i=n[0]&&gn(n);return{c(){e=D("div"),t=z(),s=D("div"),i&&i.c(),T(e,"class","bottomSpacer svelte-1kqed01"),T(s,"class","latest svelte-1kqed01")},m(r,o){A(r,e,o),A(r,t,o),A(r,s,o),i&&i.m(s,null)},p(r,[o]){r[0]?i?i.p(r,o):(i=gn(r),i.c(),i.m(s,null)):i&&(i.d(1),i=null)},i:S,o:S,d(r){r&&(P(e),P(t),P(s)),i&&i.d()}}}function Ji(n,e,t){let{visible:s}=e,i;function r(){window.scrollTo(0,document.body.scrollHeight||document.documentElement.scrollHeight),t(0,s=!1)}function o(l){ve[l?"unshift":"push"](()=>{i=l,t(1,i)})}return n.$$set=l=>{"visible"in l&&t(0,s=l.visible)},[s,i,r,o]}class Vi extends he{constructor(e){super(),ae(this,e,Ji,Gi,te,{visible:0})}}function _n(n,e,t){const s=n.slice();return s[13]=e[t],s[14]=e,s[15]=t,s}function pn(n){let e,t,s;function i(o){n[4](o,n[13],n[14],n[15])}let r={};return n[13]!==void 0&&(r.line=n[13]),e=new qi({props:r}),ve.push(()=>ms(e,"line",i)),{c(){ce(e.$$.fragment)},m(o,l){se(e,o,l),s=!0},p(o,l){n=o;const c={};!t&&l&2&&(t=!0,c.line=n[13],us(()=>t=!1)),e.$set(c)},i(o){s||($(e.$$.fragment,o),s=!0)},o(o){U(e.$$.fragment,o),s=!1},d(o){ie(e,o)}}}function Xi(n){let e,t,s,i,r,o,l;t=new Ni({});let c=rt(n[1]),a=[];for(let f=0;f<c.length;f+=1)a[f]=pn(_n(n,c,f));const h=f=>U(a[f],1,1,()=>{a[f]=null});let u={};return i=new Oi({props:u}),n[5](i),i.$on("anchored",n[3]),o=new Vi({props:{visible:n[2]}}),{c(){e=D("pre"),ce(t.$$.fragment);for(let f=0;f<a.length;f+=1)a[f].c();s=_e(),ce(i.$$.fragment),r=z(),ce(o.$$.fragment),T(e,"class","svelte-g021qu")},m(f,g){A(f,e,g),se(t,e,null);for(let p=0;p<a.length;p+=1)a[p]&&a[p].m(e,null);R(e,s),se(i,e,null),A(f,r,g),se(o,f,g),l=!0},p(f,[g]){if(g&2){c=rt(f[1]);let _;for(_=0;_<c.length;_+=1){const m=_n(f,c,_);a[_]?(a[_].p(m,g),$(a[_],1)):(a[_]=pn(m),a[_].c(),$(a[_],1),a[_].m(e,s))}for(pe(),_=c.length;_<a.length;_+=1)h(_);me()}const p={};i.$set(p);const b={};g&4&&(b.visible=f[2]),o.$set(b)},i(f){if(!l){$(t.$$.fragment,f);for(let g=0;g<c.length;g+=1)$(a[g]);$(i.$$.fragment,f),$(o.$$.fragment,f),l=!0}},o(f){U(t.$$.fragment,f),a=a.filter(Boolean);for(let g=0;g<a.length;g+=1)U(a[g]);U(i.$$.fragment,f),U(o.$$.fragment,f),l=!1},d(f){f&&(P(e),P(r)),ie(t),An(a,f),n[5](null),ie(i),ie(o,f)}}}const mn=1e3;function Yi(n,e,t){let s,i,r,o=0,l=0,c,a=!1;const h=window.location.pathname.replace("/",""),u=new jn().withUrl("/api/tail").configureLogging(d.Information).build();async function f(){try{await u.start(),await u.invoke("Join",h),console.log(`Connected to tail '${h}' and awaiting data..`)}catch(_){console.log(_),setTimeout(f,5e3)}}u.onclose(async()=>{await f()}),u.on("ReceiveData",_=>{const m=_.split(`
`);for(let v=0;v<m.length;v++)v!=m.length-1&&(m[v]+=`
`),r?(r.appendText(m[v]),t(1,i),m[v].indexOf(`
`)!=-1&&(r=void 0)):(s.isCurrentlyAnchored()&&(l=Date.now()+250),r=new Hi(o,m[v]),i.push(r),o++,i.length>mn?t(1,i=i.slice(mn*-1)):t(1,i),Date.now()<l&&s.scrollToBottom())}),At(async()=>{s.scrollToBottom(),await f()});function g(_){t(2,c=!_.detail),!a&&i.length==0&&c&&(a=!0,s.scrollToBottom())}function p(_,m,v,y){v[y]=_,t(1,i)}function b(_){ve[_?"unshift":"push"](()=>{s=_,t(0,s)})}return t(1,i=[]),t(2,c=!1),[s,i,c,g,p,b]}class Ki extends he{constructor(e){super(),ae(this,e,Yi,Xi,te,{})}}const Zi="modulepreload",Qi=function(n){return"/"+n},bn={},er=function(e,t,s){if(!t||t.length===0)return e();const i=document.getElementsByTagName("link");return Promise.all(t.map(r=>{if(r=Qi(r),r in bn)return;bn[r]=!0;const o=r.endsWith(".css"),l=o?'[rel="stylesheet"]':"";if(!!s)for(let h=i.length-1;h>=0;h--){const u=i[h];if(u.href===r&&(!o||u.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${r}"]${l}`))return;const a=document.createElement("link");if(a.rel=o?"stylesheet":Zi,o||(a.as="script",a.crossOrigin=""),a.href=r,document.head.appendChild(a),o)return new Promise((h,u)=>{a.addEventListener("load",h),a.addEventListener("error",()=>u(new Error(`Unable to preload CSS for ${r}`)))})})).then(()=>e()).catch(r=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=r,window.dispatchEvent(o),!o.defaultPrevented)throw r})};var fe=(n=>(n[n.Foreground=0]="Foreground",n[n.Background=1]="Background",n))(fe||{}),de=(n=>(n[n.Default=0]="Default",n[n.Black=1]="Black",n[n.Red=2]="Red",n[n.Green=3]="Green",n[n.Yellow=4]="Yellow",n[n.Blue=5]="Blue",n[n.Magenta=6]="Magenta",n[n.Cyan=7]="Cyan",n[n.White=8]="White",n[n.BrightBlack=9]="BrightBlack",n[n.BrightRed=10]="BrightRed",n[n.BrightGreen=11]="BrightGreen",n[n.BrightYellow=12]="BrightYellow",n[n.BrightBlue=13]="BrightBlue",n[n.BrightMagenta=14]="BrightMagenta",n[n.BrightCyan=15]="BrightCyan",n[n.BrightWhite=16]="BrightWhite",n))(de||{});const tr="\x1B[39m",nr="\x1B[49m",sr="\x1B[30m",ir="\x1B[31m",rr="\x1B[32m",or="\x1B[33m",lr="\x1B[34m",cr="\x1B[35m",ar="\x1B[36m",hr="\x1B[37m",ur="\x1B[40m",fr="\x1B[41m",dr="\x1B[42m",gr="\x1B[43m",_r="\x1B[44m",pr="\x1B[45m",mr="\x1B[46m",br="\x1B[47m",wr="\x1B[90m",yr="\x1B[91m",vr="\x1B[92m",kr="\x1B[93m",Er="\x1B[94m",Cr="\x1B[95m",Sr="\x1B[96m",Tr="\x1B[97m",Ir="\x1B[100m",xr="\x1B[101m",Dr="\x1B[102m",Pr="\x1B[103m",Br="\x1B[104m",Ar="\x1B[105m",Rr="\x1B[106m",Lr="\x1B[107m";function we(n,e){if(n==0)switch(e){case 0:return tr;case 1:return sr;case 2:return ir;case 3:return rr;case 4:return or;case 5:return lr;case 6:return cr;case 7:return ar;case 9:return wr;case 8:return hr;case 10:return yr;case 11:return vr;case 12:return kr;case 13:return Er;case 14:return Cr;case 15:return Sr;case 16:return Tr}else switch(e){case 0:return nr;case 1:return ur;case 2:return fr;case 3:return dr;case 4:return gr;case 5:return _r;case 6:return pr;case 7:return mr;case 9:return Ir;case 8:return br;case 10:return xr;case 11:return Dr;case 12:return Pr;case 13:return Br;case 14:return Ar;case 15:return Rr;case 16:return Lr}}class wn{constructor(e,t,s,i){Y(this,"id");Y(this,"type");Y(this,"rules");Y(this,"value");this.id=e,this.type=t,this.rules=s,this.value=i}}let De=0,Qe=0,St=-1,lt=!1,Me=0,Oe;const yn=new TextDecoder;onmessage=async n=>{const e=n.data;e.type==="start"?(De=0,Qe=0,St=-1,lt=!0,await $r(e.id,e.rules,e.value)):e.type==="stop"&&(lt=!1,console.log(`Total restarts: ${St}`))};async function $r(n,e,t){try{Oe=new jn().withUrl("/api/tail").configureLogging(d.Warning).build(),await Oe.start();let s=[];for(e!=="none"&&(s=await(await fetch(`/rules/${e}.json`)).json());lt;)try{St++;const i=await t.getFile(),r=i.size;if(r==Qe){Me=Me==5e3?5e3:Me+500,await new Promise((a,h)=>setTimeout(a,Me));continue}else r<Qe&&r>0&&(console.log("File truncated"),De=0);Me=0,Qe=r;const l=i.stream().getReader();let c=0;for(;lt;){const{done:a,value:h}=await l.read();if(h&&(c+=h.length,c>De)){if(s.length>0){const f=yn.decode(h.slice(De-c)).split(`
`);for(let g=0;g<f.length;g++)for(let p of s)f[g]=Nr(f[g],p);Oe.invoke("SendData",n,f.join(`
`))}else Oe.invoke("SendData",n,yn.decode(h.slice(De-c)));De=c}if(a)break}}catch(i){if(i.message!=="network error")throw i}}catch(s){console.log(s)}finally{await Oe.stop()}}function Nr(n,e){var i,r;const t=new RegExp(e.pattern,`d${e.ignore_case?"i":""}${e.first_only?"":"g"}`),s=Array.from(RegExp.prototype[Symbol.matchAll].call(t,n)).reverse();for(let o of s)(r=(i=o.indices)==null?void 0:i.groups)!=null&&r.c?n=[n.slice(0,o.indices.groups.c[0]),we(fe.Background,de[e.background]),we(fe.Foreground,de[e.foreground]),o.groups.c,n.slice(o.indices.groups.c[1],o.indices.groups.c[1]),we(fe.Background,de.Default),we(fe.Foreground,de.Default),n.slice(o.indices.groups.c[1])].join(""):n=[n.slice(0,o.indices[0][0]),we(fe.Background,de[e.background]),we(fe.Foreground,de[e.foreground]),o,n.slice(o.indices[0][1],o.indices[0][1]),we(fe.Background,de.Default),we(fe.Foreground,de.Default),n.slice(o.indices[0][1])].join("");return n}const pt=[[17,14,11,7],[32,26,20,14],[53,42,32,24],[78,62,46,34],[106,84,60,44],[134,106,74,58],[154,122,86,64],[192,152,108,84],[230,180,130,98],[271,213,151,119],[321,251,177,137],[367,287,203,155],[425,331,241,177],[458,362,258,194],[520,412,292,220],[586,450,322,250],[644,504,364,280],[718,560,394,310],[792,624,442,338],[858,666,482,382],[929,711,509,403],[1003,779,565,439],[1091,857,611,461],[1171,911,661,511],[1273,997,715,535],[1367,1059,751,593],[1465,1125,805,625],[1528,1190,868,658],[1628,1264,908,698],[1732,1370,982,742],[1840,1452,1030,790],[1952,1538,1112,842],[2068,1628,1168,898],[2188,1722,1228,958],[2303,1809,1283,983],[2431,1911,1351,1051],[2563,1989,1423,1093],[2699,2099,1499,1139],[2809,2213,1579,1219],[2953,2331,1663,1273]];var K;(function(n){n[n.MODE_NUMBER=1]="MODE_NUMBER",n[n.MODE_ALPHA_NUM=2]="MODE_ALPHA_NUM",n[n.MODE_8BIT_BYTE=4]="MODE_8BIT_BYTE",n[n.MODE_KANJI=8]="MODE_KANJI"})(K||(K={}));var oe;(function(n){n[n.L=1]="L",n[n.M=0]="M",n[n.Q=3]="Q",n[n.H=2]="H"})(oe||(oe={}));var re;(function(n){n[n.PATTERN000=0]="PATTERN000",n[n.PATTERN001=1]="PATTERN001",n[n.PATTERN010=2]="PATTERN010",n[n.PATTERN011=3]="PATTERN011",n[n.PATTERN100=4]="PATTERN100",n[n.PATTERN101=5]="PATTERN101",n[n.PATTERN110=6]="PATTERN110",n[n.PATTERN111=7]="PATTERN111"})(re||(re={}));class Ur{constructor(){this.buffer=[],this.length=0}get(e){const t=Math.floor(e/8);return(this.buffer[t]>>>7-e%8&1)==1}put(e,t){for(let s=0;s<t;s++)this.putBit((e>>>t-s-1&1)==1)}getLengthInBits(){return this.length}putBit(e){const t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0),e&&(this.buffer[t]|=128>>>this.length%8),this.length++}}class Ut{constructor(e,t){this.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],this.totalCount=e,this.dataCount=t}getRSBlocks(e,t){const s=this.getRsBlockTable(e,t);if(s==null)throw new Error("bad rs block @ typeNumber:"+e+"/errorCorrectLevel:"+t);const i=s.length/3,r=[];for(let o=0;o<i;o++){const l=s[o*3+0],c=s[o*3+1],a=s[o*3+2];for(let h=0;h<l;h++)r.push(new Ut(c,a))}return r}getRsBlockTable(e,t){switch(t){case oe.L:return this.RS_BLOCK_TABLE[(e-1)*4+0];case oe.M:return this.RS_BLOCK_TABLE[(e-1)*4+1];case oe.Q:return this.RS_BLOCK_TABLE[(e-1)*4+2];case oe.H:return this.RS_BLOCK_TABLE[(e-1)*4+3];default:return}}}class Mr{constructor(e){this.mode=K.MODE_8BIT_BYTE,this.data=e,this.parsedData=[];for(let t=0,s=this.data.length;t<s;t++){const i=[],r=this.data.charCodeAt(t);r>65536?(i[0]=240|(r&1835008)>>>18,i[1]=128|(r&258048)>>>12,i[2]=128|(r&4032)>>>6,i[3]=128|r&63):r>2048?(i[0]=224|(r&61440)>>>12,i[1]=128|(r&4032)>>>6,i[2]=128|r&63):r>128?(i[0]=192|(r&1984)>>>6,i[1]=128|r&63):i[0]=r,this.parsedData.push(...i)}this.parsedData=Array.prototype.concat.apply([],this.parsedData),this.parsedData.length!=this.data.length&&(this.parsedData.unshift(191),this.parsedData.unshift(187),this.parsedData.unshift(239))}getLength(){return this.parsedData.length}write(e){for(let t=0,s=this.parsedData.length;t<s;t++)e.put(this.parsedData[t],8)}}class qn{constructor(){this.EXP_TABLE=new Array(256),this.LOG_TABLE=new Array(256);for(let e=0;e<8;e++)this.EXP_TABLE[e]=1<<e;for(let e=8;e<256;e++)this.EXP_TABLE[e]=this.EXP_TABLE[e-4]^this.EXP_TABLE[e-5]^this.EXP_TABLE[e-6]^this.EXP_TABLE[e-8];for(let e=0;e<255;e++)this.LOG_TABLE[this.EXP_TABLE[e]]=e}glog(e){if(e<1)throw new Error("glog("+e+")");return this.LOG_TABLE[e]}gexp(e){for(;e<0;)e+=255;for(;e>=256;)e-=255;return this.EXP_TABLE[e]}}class Le{constructor(e,t){if(this.qrMath=new qn,e.length==null)throw new Error(e.length+"/"+t);let s=0;for(;s<e.length&&e[s]==0;)s++;this.num=new Array(e.length-s+t);for(let i=0;i<e.length-s;i++)this.num[i]=e[i+s]}get(e){return this.num[e]}getLength(){return this.num.length}multiply(e){const t=new Array(this.getLength()+e.getLength()-1);for(let s=0;s<this.getLength();s++)for(let i=0;i<e.getLength();i++)t[s+i]^=this.qrMath.gexp(this.qrMath.glog(this.get(s))+this.qrMath.glog(e.get(i)));return new Le(t,0)}mod(e){if(this.getLength()-e.getLength()<0)return this;const t=this.qrMath.glog(this.get(0))-this.qrMath.glog(e.get(0)),s=new Array(this.getLength());for(let i=0;i<this.getLength();i++)s[i]=this.get(i);for(let i=0;i<e.getLength();i++)s[i]^=this.qrMath.gexp(this.qrMath.glog(e.get(i))+t);return new Le(s,0).mod(e)}}class Or{constructor(e,t){this.qrUtil=new Hr,this.PAD0=236,this.PAD1=17,this.typeNumber=e,this.errorCorrectLevel=t,this.modules=[],this.moduleCount=0,this.dataCache=[],this.dataList=[]}addData(e){const t=new Mr(e);this.dataList.push(t),this.dataCache=[]}isDark(e,t){if(e<0||this.moduleCount<=e||t<0||this.moduleCount<=t)throw new Error(e+","+t);return this.modules[e][t]}getModuleCount(){return this.moduleCount}makeImpl(e,t){this.moduleCount=this.typeNumber*4+17,this.modules=new Array(this.moduleCount);for(let s=0;s<this.moduleCount;s++){this.modules[s]=new Array(this.moduleCount);for(let i=0;i<this.moduleCount;i++)this.modules[s][i]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(e,t),this.typeNumber>=7&&this.setupTypeNumber(e),this.dataCache.length==0&&(this.dataCache=this.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,t)}getBestMaskPattern(){let e=0,t=0;for(let s=0;s<8;s++){this.makeImpl(!0,s);const i=this.qrUtil.getLostPoint(this);(s==0||e>i)&&(e=i,t=s)}return t}make(){this.makeImpl(!1,this.getBestMaskPattern())}setupPositionProbePattern(e,t){for(let s=-1;s<=7;s++)if(!(e+s<=-1||this.moduleCount<=e+s))for(let i=-1;i<=7;i++)t+i<=-1||this.moduleCount<=t+i||(0<=s&&s<=6&&(i==0||i==6)||0<=i&&i<=6&&(s==0||s==6)||2<=s&&s<=4&&2<=i&&i<=4?this.modules[e+s][t+i]=!0:this.modules[e+s][t+i]=!1)}setupTimingPattern(){for(let e=8;e<this.moduleCount-8;e++)this.modules[e][6]==null&&(this.modules[e][6]=e%2==0);for(let e=8;e<this.moduleCount-8;e++)this.modules[6][e]==null&&(this.modules[6][e]=e%2==0)}setupPositionAdjustPattern(){const e=this.qrUtil.getPatternPosition(this.typeNumber);for(let t=0;t<e.length;t++)for(let s=0;s<e.length;s++){const i=e[t],r=e[s];if(this.modules[i][r]==null)for(let o=-2;o<=2;o++)for(let l=-2;l<=2;l++)o==-2||o==2||l==-2||l==2||o==0&&l==0?this.modules[i+o][r+l]=!0:this.modules[i+o][r+l]=!1}}setupTypeNumber(e){const t=this.qrUtil.getBCHTypeNumber(this.typeNumber);for(let s=0;s<18;s++){const i=!e&&(t>>s&1)==1;this.modules[Math.floor(s/3)][s%3+this.moduleCount-8-3]=i}for(let s=0;s<18;s++){const i=!e&&(t>>s&1)==1;this.modules[s%3+this.moduleCount-8-3][Math.floor(s/3)]=i}}setupTypeInfo(e,t){const s=this.errorCorrectLevel<<3|t,i=this.qrUtil.getBCHTypeInfo(s);for(let r=0;r<15;r++){const o=!e&&(i>>r&1)==1;r<6?this.modules[r][8]=o:r<8?this.modules[r+1][8]=o:this.modules[this.moduleCount-15+r][8]=o}for(let r=0;r<15;r++){const o=!e&&(i>>r&1)==1;r<8?this.modules[8][this.moduleCount-r-1]=o:r<9?this.modules[8][15-r-1+1]=o:this.modules[8][15-r-1]=o}this.modules[this.moduleCount-8][8]=!e}mapData(e,t){let s=-1,i=this.moduleCount-1,r=7,o=0;for(let l=this.moduleCount-1;l>0;l-=2)for(l==6&&l--;;){for(let c=0;c<2;c++)if(this.modules[i][l-c]==null){let a=!1;o<e.length&&(a=(e[o]>>>r&1)==1),this.qrUtil.getMask(t,i,l-c)&&(a=!a),this.modules[i][l-c]=a,r--,r==-1&&(o++,r=7)}if(i+=s,i<0||this.moduleCount<=i){i-=s,s=-s;break}}}createData(e,t,s){const r=new Ut(0,0).getRSBlocks(e,t),o=new Ur;for(let c=0;c<s.length;c++){const a=s[c];o.put(a.mode,4),o.put(a.getLength(),this.qrUtil.getLengthInBits(a.mode,e)),a.write(o)}let l=0;for(let c=0;c<r.length;c++)l+=r[c].dataCount;if(o.getLengthInBits()>l*8)throw new Error("code length overflow. ("+o.getLengthInBits()+">"+l*8+")");for(o.getLengthInBits()+4<=l*8&&o.put(0,4);o.getLengthInBits()%8!=0;)o.putBit(!1);for(;!(o.getLengthInBits()>=l*8||(o.put(this.PAD0,8),o.getLengthInBits()>=l*8));)o.put(this.PAD1,8);return this.createBytes(o,r)}createBytes(e,t){let s=0,i=0,r=0;const o=new Array(t.length),l=new Array(t.length);for(let u=0;u<t.length;u++){const f=t[u].dataCount,g=t[u].totalCount-f;i=Math.max(i,f),r=Math.max(r,g),o[u]=new Array(f);for(let m=0;m<o[u].length;m++)o[u][m]=255&e.buffer[m+s];s+=f;const p=this.qrUtil.getErrorCorrectPolynomial(g),_=new Le(o[u],p.getLength()-1).mod(p);l[u]=new Array(p.getLength()-1);for(let m=0;m<l[u].length;m++){const v=m+_.getLength()-l[u].length;l[u][m]=v>=0?_.get(v):0}}let c=0;for(let u=0;u<t.length;u++)c+=t[u].totalCount;const a=new Array(c);let h=0;for(let u=0;u<i;u++)for(let f=0;f<t.length;f++)u<o[f].length&&(a[h++]=o[f][u]);for(let u=0;u<r;u++)for(let f=0;f<t.length;f++)u<l[f].length&&(a[h++]=l[f][u]);return a}}class Hr{constructor(){this.data={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1335,G18:7973,G15_MASK:21522}}getBCHTypeInfo(e){let t=e<<10;for(;this.getBCHDigit(t)-this.getBCHDigit(this.data.G15)>=0;)t^=this.data.G15<<this.getBCHDigit(t)-this.getBCHDigit(this.data.G15);return(e<<10|t)^this.data.G15_MASK}getBCHTypeNumber(e){let t=e<<12;for(;this.getBCHDigit(t)-this.getBCHDigit(this.data.G18)>=0;)t^=this.data.G18<<this.getBCHDigit(t)-this.getBCHDigit(this.data.G18);return e<<12|t}getBCHDigit(e){let t=0;for(;e!=0;)t++,e>>>=1;return t}getPatternPosition(e){return this.data.PATTERN_POSITION_TABLE[e-1]}getMask(e,t,s){switch(e){case re.PATTERN000:return(t+s)%2==0;case re.PATTERN001:return t%2==0;case re.PATTERN010:return s%3==0;case re.PATTERN011:return(t+s)%3==0;case re.PATTERN100:return(Math.floor(t/2)+Math.floor(s/3))%2==0;case re.PATTERN101:return t*s%2+t*s%3==0;case re.PATTERN110:return(t*s%2+t*s%3)%2==0;case re.PATTERN111:return(t*s%3+(t+s)%2)%2==0;default:throw new Error("bad maskPattern:"+e)}}getErrorCorrectPolynomial(e){const t=new qn;let s=new Le([1],0);for(let i=0;i<e;i++)s=s.multiply(new Le([1,t.gexp(i)],0));return s}getLengthInBits(e,t){if(1<=t&&t<10)switch(e){case K.MODE_NUMBER:return 10;case K.MODE_ALPHA_NUM:return 9;case K.MODE_8BIT_BYTE:return 8;case K.MODE_KANJI:return 8;default:throw new Error("mode:"+e)}else if(t<27)switch(e){case K.MODE_NUMBER:return 12;case K.MODE_ALPHA_NUM:return 11;case K.MODE_8BIT_BYTE:return 16;case K.MODE_KANJI:return 10;default:throw new Error("mode:"+e)}else if(t<41)switch(e){case K.MODE_NUMBER:return 14;case K.MODE_ALPHA_NUM:return 13;case K.MODE_8BIT_BYTE:return 16;case K.MODE_KANJI:return 12;default:throw new Error("mode:"+e)}else throw new Error("type:"+t)}getLostPoint(e){const t=e.getModuleCount();let s=0;for(let o=0;o<t;o++)for(let l=0;l<t;l++){let c=0;const a=e.isDark(o,l);for(let h=-1;h<=1;h++)if(!(o+h<0||t<=o+h))for(let u=-1;u<=1;u++)l+u<0||t<=l+u||h==0&&u==0||a==e.isDark(o+h,l+u)&&c++;c>5&&(s+=3+c-5)}for(let o=0;o<t-1;o++)for(let l=0;l<t-1;l++){let c=0;e.isDark(o,l)&&c++,e.isDark(o+1,l)&&c++,e.isDark(o,l+1)&&c++,e.isDark(o+1,l+1)&&c++,(c==0||c==4)&&(s+=3)}for(let o=0;o<t;o++)for(let l=0;l<t-6;l++)e.isDark(o,l)&&!e.isDark(o,l+1)&&e.isDark(o,l+2)&&e.isDark(o,l+3)&&e.isDark(o,l+4)&&!e.isDark(o,l+5)&&e.isDark(o,l+6)&&(s+=40);for(let o=0;o<t;o++)for(let l=0;l<t-6;l++)e.isDark(l,o)&&!e.isDark(l+1,o)&&e.isDark(l+2,o)&&e.isDark(l+3,o)&&e.isDark(l+4,o)&&!e.isDark(l+5,o)&&e.isDark(l+6,o)&&(s+=40);let i=0;for(let o=0;o<t;o++)for(let l=0;l<t;l++)e.isDark(l,o)&&i++;const r=Math.abs(100*i/t/t-50)/5;return s+=r*10,s}}class jr{constructor(e){if(this.options={content:"",padding:8,width:256,height:256,typeNumber:4,color:"#000000",background:"#ffffff",ecl:"M",container:"svg",join:!0},typeof e=="string"&&(e={content:e}),e)for(const r in e)this.options[r]=e[r];if(this.options.content.length===0||this.options.content.length>7e3)throw new Error("Expected 'content' to be non-empty and less than 6K !");this.options.padding<1&&(this.options.padding=1),this.options.width<1&&(this.options.width=256),this.options.height<1&&(this.options.height=256);const t=this.options.content,s=this._getTypeNumber(t,this.options.ecl),i=this._getErrorCorrectLevel(this.options.ecl);this.qrCodeModel=new Or(s,i),this.qrCodeModel.addData(t),this.qrCodeModel.make()}_getErrorCorrectLevel(e){switch(e){case"L":return oe.L;case"M":return oe.M;case"Q":return oe.Q;case"H":return oe.H;default:throw new Error("Unknown error correction level: "+e)}}_getTypeNumber(e,t){const s=this._getUTF8Length(e);let i=1,r=0;for(let o=0,l=pt.length;o<=l;o++){const c=pt[o];if(!c)throw new Error("Content too long: expected "+r+" but got "+s);switch(t){case"L":r=c[0];break;case"M":r=c[1];break;case"Q":r=c[2];break;case"H":r=c[3];break;default:throw new Error("Unknown error correction level: "+t)}if(s<=r)break;i++}if(i>pt.length)throw new Error("Content too long");return i}_getUTF8Length(e){const t=encodeURI(e).toString().replace(/\%[0-9a-fA-F]{2}/g,"a");return t.length+(t.length!=e.length?3:0)}svg(){const e="",t=this.options.width,s=this.options.height,i=this.qrCodeModel.modules,r=i.length,o=t/(r+2*this.options.padding),l=s/(r+2*this.options.padding),c=this.options.join,a='<rect x="0" y="0" width="'+t+'" height="'+s+'" style="fill:'+this.options.background+';shape-rendering:crispEdges;"/>'+e;let h="",u="";for(let g=0;g<r;g++)for(let p=0;p<r;p++)if(i[p][g]){let _=p*o+this.options.padding*o,m=g*l+this.options.padding*l;if(c){let v=o+_,y=l+m;_=Number.isInteger(_)?Number(_):_.toFixed(2),m=Number.isInteger(m)?Number(m):m.toFixed(2),v=Number.isInteger(v)?Number(v):v.toFixed(2),y=Number.isInteger(y)?Number(y):y.toFixed(2),u+="M"+_+","+m+" V"+y+" H"+v+" V"+m+" H"+_+" Z "}else h+='<rect x="'+_.toString()+'" y="'+m.toString()+'" width="'+o+'" height="'+l+'" style="fill:'+this.options.color+';shape-rendering:crispEdges;"/>'+e}c&&(h='<path x="0" y="0" style="fill:'+this.options.color+';shape-rendering:crispEdges;" d="'+u+'" />');let f="";switch(this.options.container){case"svg":f+='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" width="'+t+'" height="'+s+'">'+e,f+=a+h,f+="</svg>";break;case"svg-viewbox":f+='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 '+t+" "+s+'">'+e,f+=a+h,f+="</svg>";break;default:f+=a+h;break}return f}}function Fr(n){let e,t=n[0].svg()+"",s;return{c(){e=new ss(!1),s=_e(),e.a=s},m(i,r){e.m(t,i,r),A(i,s,r)},p:S,i:S,o:S,d(i){i&&(P(s),e.d())}}}function Wr(n,e,t){let{content:s=""}=e,{backgroundColor:i="#ffffff"}=e,{color:r="#000000"}=e,{errorCorrection:o="M"}=e,{isResponsive:l=!1}=e,{padding:c=4}=e,{size:a=150}=e;const h={background:i,color:r,container:l?"svg-viewbox":"svg",content:s,ecl:o,height:a,join:!0,padding:c,typeNumber:4,width:a},u=new jr(h);return n.$$set=f=>{"content"in f&&t(1,s=f.content),"backgroundColor"in f&&t(2,i=f.backgroundColor),"color"in f&&t(3,r=f.color),"errorCorrection"in f&&t(4,o=f.errorCorrection),"isResponsive"in f&&t(5,l=f.isResponsive),"padding"in f&&t(6,c=f.padding),"size"in f&&t(7,a=f.size)},[u,s,i,r,o,l,c,a]}class zr extends he{constructor(e){super(),ae(this,e,Wr,Fr,te,{content:1,backgroundColor:2,color:3,errorCorrection:4,isResponsive:5,padding:6,size:7})}}function qr(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Gn={exports:{}};(function(n){var e=(()=>{var t=Object.defineProperty,s=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,r=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,c=(E,C,I)=>C in E?t(E,C,{enumerable:!0,configurable:!0,writable:!0,value:I}):E[C]=I,a=(E,C)=>{for(var I in C||(C={}))o.call(C,I)&&c(E,I,C[I]);if(r)for(var I of r(C))l.call(C,I)&&c(E,I,C[I]);return E},h=(E,C)=>{for(var I in C)t(E,I,{get:C[I],enumerable:!0})},u=(E,C,I,F)=>{if(C&&typeof C=="object"||typeof C=="function")for(let L of i(C))!o.call(E,L)&&L!==I&&t(E,L,{get:()=>C[L],enumerable:!(F=s(C,L))||F.enumerable});return E},f=E=>u(t({},"__esModule",{value:!0}),E),g=(E,C,I)=>(c(E,typeof C!="symbol"?C+"":C,I),I),p={};h(p,{DEFAULT_OPTIONS:()=>m,DEFAULT_UUID_LENGTH:()=>_,default:()=>y});var b="5.0.3",_=6,m={dictionary:"alphanum",shuffle:!0,debug:!1,length:_,counter:0},v=class{constructor(C={}){g(this,"counter"),g(this,"debug"),g(this,"dict"),g(this,"version"),g(this,"dictIndex",0),g(this,"dictRange",[]),g(this,"lowerBound",0),g(this,"upperBound",0),g(this,"dictLength",0),g(this,"uuidLength"),g(this,"_digit_first_ascii",48),g(this,"_digit_last_ascii",58),g(this,"_alpha_lower_first_ascii",97),g(this,"_alpha_lower_last_ascii",123),g(this,"_hex_last_ascii",103),g(this,"_alpha_upper_first_ascii",65),g(this,"_alpha_upper_last_ascii",91),g(this,"_number_dict_ranges",{digits:[this._digit_first_ascii,this._digit_last_ascii]}),g(this,"_alpha_dict_ranges",{lowerCase:[this._alpha_lower_first_ascii,this._alpha_lower_last_ascii],upperCase:[this._alpha_upper_first_ascii,this._alpha_upper_last_ascii]}),g(this,"_alpha_lower_dict_ranges",{lowerCase:[this._alpha_lower_first_ascii,this._alpha_lower_last_ascii]}),g(this,"_alpha_upper_dict_ranges",{upperCase:[this._alpha_upper_first_ascii,this._alpha_upper_last_ascii]}),g(this,"_alphanum_dict_ranges",{digits:[this._digit_first_ascii,this._digit_last_ascii],lowerCase:[this._alpha_lower_first_ascii,this._alpha_lower_last_ascii],upperCase:[this._alpha_upper_first_ascii,this._alpha_upper_last_ascii]}),g(this,"_alphanum_lower_dict_ranges",{digits:[this._digit_first_ascii,this._digit_last_ascii],lowerCase:[this._alpha_lower_first_ascii,this._alpha_lower_last_ascii]}),g(this,"_alphanum_upper_dict_ranges",{digits:[this._digit_first_ascii,this._digit_last_ascii],upperCase:[this._alpha_upper_first_ascii,this._alpha_upper_last_ascii]}),g(this,"_hex_dict_ranges",{decDigits:[this._digit_first_ascii,this._digit_last_ascii],alphaDigits:[this._alpha_lower_first_ascii,this._hex_last_ascii]}),g(this,"_dict_ranges",{_number_dict_ranges:this._number_dict_ranges,_alpha_dict_ranges:this._alpha_dict_ranges,_alpha_lower_dict_ranges:this._alpha_lower_dict_ranges,_alpha_upper_dict_ranges:this._alpha_upper_dict_ranges,_alphanum_dict_ranges:this._alphanum_dict_ranges,_alphanum_lower_dict_ranges:this._alphanum_lower_dict_ranges,_alphanum_upper_dict_ranges:this._alphanum_upper_dict_ranges,_hex_dict_ranges:this._hex_dict_ranges}),g(this,"log",(...w)=>{const x=[...w];if(x[0]=`[short-unique-id] ${w[0]}`,this.debug===!0&&typeof console<"u"&&console!==null)return console.log(...x)}),g(this,"setDictionary",(w,x)=>{let B;if(w&&Array.isArray(w)&&w.length>1)B=w;else{B=[];let N;this.dictIndex=N=0;const X=`_${w}_dict_ranges`,W=this._dict_ranges[X];Object.keys(W).forEach(ue=>{const at=ue;for(this.dictRange=W[at],this.lowerBound=this.dictRange[0],this.upperBound=this.dictRange[1],this.dictIndex=N=this.lowerBound;this.lowerBound<=this.upperBound?N<this.upperBound:N>this.upperBound;this.dictIndex=this.lowerBound<=this.upperBound?N+=1:N-=1)B.push(String.fromCharCode(this.dictIndex))})}x&&(B=B.sort(()=>Math.random()-.5)),this.dict=B,this.dictLength=this.dict.length,this.setCounter(0)}),g(this,"seq",()=>this.sequentialUUID()),g(this,"sequentialUUID",()=>{let w,x,B="";w=this.counter;do x=w%this.dictLength,w=Math.trunc(w/this.dictLength),B+=this.dict[x];while(w!==0);return this.counter+=1,B}),g(this,"rnd",(w=this.uuidLength||_)=>this.randomUUID(w)),g(this,"randomUUID",(w=this.uuidLength||_)=>{let x,B,N;if(w===null||typeof w>"u"||w<1)throw new Error("Invalid UUID Length Provided");for(x="",N=0;N<w;N+=1)B=parseInt((Math.random()*this.dictLength).toFixed(0),10)%this.dictLength,x+=this.dict[B];return x}),g(this,"fmt",(w,x)=>this.formattedUUID(w,x)),g(this,"formattedUUID",(w,x)=>{const B={$r:this.randomUUID,$s:this.sequentialUUID,$t:this.stamp};return w.replace(/\$[rs]\d{0,}|\$t0|\$t[1-9]\d{1,}/g,X=>{const W=X.slice(0,2),ue=parseInt(X.slice(2),10);return W==="$s"?B[W]().padStart(ue,"0"):W==="$t"&&x?B[W](ue,x):B[W](ue)})}),g(this,"availableUUIDs",(w=this.uuidLength)=>parseFloat(Math.pow([...new Set(this.dict)].length,w).toFixed(0))),g(this,"approxMaxBeforeCollision",(w=this.availableUUIDs(this.uuidLength))=>parseFloat(Math.sqrt(Math.PI/2*w).toFixed(20))),g(this,"collisionProbability",(w=this.availableUUIDs(this.uuidLength),x=this.uuidLength)=>parseFloat((this.approxMaxBeforeCollision(w)/this.availableUUIDs(x)).toFixed(20))),g(this,"uniqueness",(w=this.availableUUIDs(this.uuidLength))=>{const x=parseFloat((1-this.approxMaxBeforeCollision(w)/w).toFixed(20));return x>1?1:x<0?0:x}),g(this,"getVersion",()=>this.version),g(this,"stamp",(w,x)=>{const B=Math.floor(+(x||new Date)/1e3).toString(16);if(typeof w=="number"&&w===0)return B;if(typeof w!="number"||w<10)throw new Error(["Param finalLength must be a number greater than or equal to 10,","or 0 if you want the raw hexadecimal timestamp"].join(`
`));const N=w-9,X=Math.round(Math.random()*(N>15?15:N)),W=this.randomUUID(N);return`${W.substring(0,X)}${B}${W.substring(X)}${X.toString(16)}`}),g(this,"parseStamp",(w,x)=>{if(x&&!/t0|t[1-9]\d{1,}/.test(x))throw new Error("Cannot extract date from a formated UUID with no timestamp in the format");const B=x?x.replace(/\$[rs]\d{0,}|\$t0|\$t[1-9]\d{1,}/g,X=>{const W={$r:Ne=>[...Array(Ne)].map(()=>"r").join(""),$s:Ne=>[...Array(Ne)].map(()=>"s").join(""),$t:Ne=>[...Array(Ne)].map(()=>"t").join("")},ue=X.slice(0,2),at=parseInt(X.slice(2),10);return W[ue](at)}).replace(/^(.*?)(t{8,})(.*)$/g,(X,W,ue)=>w.substring(W.length,W.length+ue.length)):w;if(B.length===8)return new Date(parseInt(B,16)*1e3);if(B.length<10)throw new Error("Stamp length invalid");const N=parseInt(B.substring(B.length-1),16);return new Date(parseInt(B.substring(N,N+8),16)*1e3)}),g(this,"setCounter",w=>{this.counter=w});const I=a(a({},m),C);this.counter=0,this.debug=!1,this.dict=[],this.version=b;const{dictionary:F,shuffle:L,length:k,counter:j}=I;return this.uuidLength=k,this.setDictionary(F,L),this.setCounter(j),this.debug=I.debug,this.log(this.dict),this.log(`Generator instantiated with Dictionary Size ${this.dictLength} and counter set to ${this.counter}`),this.log=this.log.bind(this),this.setDictionary=this.setDictionary.bind(this),this.setCounter=this.setCounter.bind(this),this.seq=this.seq.bind(this),this.sequentialUUID=this.sequentialUUID.bind(this),this.rnd=this.rnd.bind(this),this.randomUUID=this.randomUUID.bind(this),this.fmt=this.fmt.bind(this),this.formattedUUID=this.formattedUUID.bind(this),this.availableUUIDs=this.availableUUIDs.bind(this),this.approxMaxBeforeCollision=this.approxMaxBeforeCollision.bind(this),this.collisionProbability=this.collisionProbability.bind(this),this.uniqueness=this.uniqueness.bind(this),this.getVersion=this.getVersion.bind(this),this.stamp=this.stamp.bind(this),this.parseStamp=this.parseStamp.bind(this),this}};g(v,"default",v);var y=v;return f(p)})();n.exports=e.default,typeof window<"u"&&(e=e.default)})(Gn);var Gr=Gn.exports;const Jr=qr(Gr);async function Vr(n){if("clipboard"in navigator)await navigator.clipboard.writeText(n);else{const e=document.createElement("input");e.type="text",e.disabled=!0,e.style.setProperty("position","fixed"),e.style.setProperty("z-index","-100"),e.style.setProperty("pointer-events","none"),e.style.setProperty("opacity","0"),e.value=n,document.body.appendChild(e),e.click(),e.select(),document.execCommand("copy"),document.body.removeChild(e)}}const Xr=(n,e)=>{async function t(){if(i)try{await Vr(i),n.dispatchEvent(new CustomEvent("svelte-copy",{detail:i}))}catch(r){n.dispatchEvent(new CustomEvent("svelte-copy:error",{detail:r}))}}let s=typeof e=="string"?["click"]:[e.events].flat(1),i=typeof e=="string"?e:e.text;return s.forEach(r=>{n.addEventListener(r,t,!0)}),{update:r=>{const o=typeof r=="string"?["click"]:[r.events].flat(1),l=typeof r=="string"?r:r.text,c=o.filter(h=>!s.includes(h)),a=s.filter(h=>!o.includes(h));c.forEach(h=>{n.addEventListener(h,t,!0)}),a.forEach(h=>{n.removeEventListener(h,t,!0)}),s=o,i=l},destroy:()=>{s.forEach(r=>{n.removeEventListener(r,t,!0)})}}};function vn(n,e,t){const s=n.slice();return s[22]=e[t],s}function Yr(n){let e;return{c(){e=D("div"),e.textContent="Tab 3"},m(t,s){A(t,e,s)},p:S,i:S,o:S,d(t){t&&P(e)}}}function Kr(n){let e;return{c(){e=D("div"),e.textContent="Tab 2"},m(t,s){A(t,e,s)},p:S,i:S,o:S,d(t){t&&P(e)}}}function Zr(n){let e,t,s,i;const r=[eo,Qr],o=[];function l(c,a){return lo()?0:1}return t=l(),s=o[t]=r[t](n),{c(){e=D("div"),s.c(),T(e,"id","config"),T(e,"class","svelte-957wsz")},m(c,a){A(c,e,a),o[t].m(e,null),i=!0},p(c,a){s.p(c,a)},i(c){i||($(s),i=!0)},o(c){U(s),i=!1},d(c){c&&P(e),o[t].d()}}}function Qr(n){let e;return{c(){e=D("div"),e.innerHTML="<p>This feature currently only works in Chromium-based browsers with the File System API enabled.</p>",T(e,"id","drop-canvas"),T(e,"class","svelte-957wsz")},m(t,s){A(t,e,s)},p:S,i:S,o:S,d(t){t&&P(e)}}}function eo(n){let e,t,s,i;const r=[no,to],o=[];function l(c,a){return c[3]?1:0}return e=l(n),t=o[e]=r[e](n),{c(){t.c(),s=_e()},m(c,a){o[e].m(c,a),A(c,s,a),i=!0},p(c,a){let h=e;e=l(c),e===h?o[e].p(c,a):(pe(),U(o[h],1,1,()=>{o[h]=null}),me(),t=o[e],t?t.p(c,a):(t=o[e]=r[e](c),t.c()),$(t,1),t.m(s.parentNode,s))},i(c){i||($(t),i=!0)},o(c){U(t),i=!1},d(c){c&&P(s),o[e].d(c)}}}function to(n){var x;let e,t,s,i,r,o,l=`https://tailed.live/${n[4]}`,c,a,h,u,f,g,p,b,_,m,v,y,E,C=((x=n[2])==null?void 0:x.name)+"",I,F,L,k,j,w;return s=new zr({props:{content:`https://tailed.live/${n[4]}`,color:"var(--ansi-white)",backgroundColor:"var(--ansi-black)"}}),{c(){e=D("div"),t=D("p"),ce(s.$$.fragment),i=z(),r=D("p"),o=D("a"),c=le(l),h=z(),u=D("button"),u.innerHTML='<img src="/copy.svg" alt="Copy" class="svelte-957wsz"/>',g=z(),p=D("div"),b=D("img"),m=z(),v=D("p"),y=le("Tailing "),E=D("span"),I=le(C),F=z(),L=D("button"),L.textContent="Stop",T(o,"href",a=`https://tailed.live/${n[4]}`),T(o,"target","_blank"),T(o,"class","svelte-957wsz"),T(u,"id","copy"),T(u,"title","Copy URL"),T(u,"class","svelte-957wsz"),T(r,"class","filename svelte-957wsz"),T(e,"id","details"),T(b,"id","spinner"),Yn(b.src,_="/spinner.gif")||T(b,"src",_),T(b,"alt","spinner"),T(b,"class","svelte-957wsz"),T(E,"class","filename svelte-957wsz"),T(L,"id","stop"),T(L,"class","svelte-957wsz")},m(B,N){A(B,e,N),R(e,t),se(s,t,null),R(e,i),R(e,r),R(r,o),R(o,c),R(r,h),R(r,u),A(B,g,N),A(B,p,N),R(p,b),R(p,m),R(p,v),R(v,y),R(v,E),R(E,I),R(p,F),R(p,L),k=!0,j||(w=[Pt(f=Xr.call(null,u,`https://tailed.live/${n[4]}`)),Z(L,"click",n[13])],j=!0)},p(B,N){var W;const X={};N&16&&(X.content=`https://tailed.live/${B[4]}`),s.$set(X),(!k||N&16)&&l!==(l=`https://tailed.live/${B[4]}`)&&tt(c,l),(!k||N&16&&a!==(a=`https://tailed.live/${B[4]}`))&&T(o,"href",a),f&&Ce(f.update)&&N&16&&f.update.call(null,`https://tailed.live/${B[4]}`),(!k||N&4)&&C!==(C=((W=B[2])==null?void 0:W.name)+"")&&tt(I,C)},i(B){k||($(s.$$.fragment,B),k=!0)},o(B){U(s.$$.fragment,B),k=!1},d(B){B&&(P(e),P(g),P(p)),ie(s),j=!1,ee(w)}}}function no(n){let e,t,s,i,r,o,l,c,a,h,u,f,g;function p(y,E){return y[2]?so:io}let b=p(n),_=b(n),m=rt(n[0]),v=[];for(let y=0;y<m.length;y+=1)v[y]=kn(vn(n,m,y));return{c(){e=D("div"),_.c(),t=z(),s=D("p"),s.textContent="Optionally, choose some highlighting rules to be applied:",i=z(),r=D("select"),o=D("option"),o.textContent="None";for(let y=0;y<v.length;y+=1)v[y].c();l=z(),c=D("div"),a=D("button"),h=le("Start tailing!"),T(e,"id","drop-canvas"),T(e,"class","svelte-957wsz"),o.__value="none",mt(o,o.__value),o.selected=!0,T(r,"id","rules"),T(r,"class","svelte-957wsz"),n[6]===void 0&&Ee(()=>n[18].call(r)),T(a,"id","tail"),a.disabled=u=!n[2],T(a,"class","svelte-957wsz"),T(c,"class","button-container svelte-957wsz")},m(y,E){A(y,e,E),_.m(e,null),n[17](e),A(y,t,E),A(y,s,E),A(y,i,E),A(y,r,E),R(r,o);for(let C=0;C<v.length;C+=1)v[C]&&v[C].m(r,null);jt(r,n[6],!0),A(y,l,E),A(y,c,E),R(c,a),R(a,h),f||(g=[Z(e,"drop",n[7]),Z(e,"dragover",oo),Z(e,"dragenter",n[8]),Z(e,"dragleave",n[9]),Z(r,"change",n[18]),Z(a,"click",n[12])],f=!0)},p(y,E){if(b===(b=p(y))&&_?_.p(y,E):(_.d(1),_=b(y),_&&(_.c(),_.m(e,null))),E&1){m=rt(y[0]);let C;for(C=0;C<m.length;C+=1){const I=vn(y,m,C);v[C]?v[C].p(I,E):(v[C]=kn(I),v[C].c(),v[C].m(r,null))}for(;C<v.length;C+=1)v[C].d(1);v.length=m.length}E&65&&jt(r,y[6]),E&4&&u!==(u=!y[2])&&(a.disabled=u)},i:S,o:S,d(y){y&&(P(e),P(t),P(s),P(i),P(r),P(l),P(c)),_.d(),n[17](null),An(v,y),f=!1,ee(g)}}}function so(n){var a;let e,t,s=((a=n[2])==null?void 0:a.name)+"",i,r,o,l,c;return{c(){e=D("p"),t=D("span"),i=le(s),r=z(),o=D("a"),o.textContent="(change)",T(t,"class","filename svelte-957wsz"),T(o,"href","/"),T(o,"class","svelte-957wsz")},m(h,u){A(h,e,u),R(e,t),R(t,i),R(e,r),R(e,o),l||(c=Z(o,"click",n[10]),l=!0)},p(h,u){var f;u&4&&s!==(s=((f=h[2])==null?void 0:f.name)+"")&&tt(i,s)},d(h){h&&P(e),l=!1,c()}}}function io(n){let e,t,s,i,r,o;return{c(){e=D("p"),t=le("Drag a log file here or "),s=D("a"),s.textContent="click to choose one",i=le("."),T(s,"href","/"),T(s,"class","svelte-957wsz")},m(l,c){A(l,e,c),R(e,t),R(e,s),R(e,i),r||(o=Z(s,"click",n[11]),r=!0)},p:S,d(l){l&&P(e),r=!1,o()}}}function kn(n){let e,t=n[22].name+"",s,i;return{c(){e=D("option"),s=le(t),e.__value=i=n[22].id,mt(e,e.__value)},m(r,o){A(r,e,o),R(e,s)},p(r,o){o&1&&t!==(t=r[22].name+"")&&tt(s,t),o&1&&i!==(i=r[22].id)&&(e.__value=i,mt(e,e.__value))},d(r){r&&P(e)}}}function ro(n){let e,t,s,i,r,o,l,c,a,h,u,f,g,p,b,_,m,v;const y=[Zr,Kr,Yr],E=[];function C(I,F){return I[1]==0?0:I[1]==1?1:I[1]==2?2:-1}return~(p=C(n))&&(b=E[p]=y[p](n)),{c(){e=D("div"),t=D("div"),t.innerHTML='<img src="/logo_white.svg" alt="Tailed logo" class="svelte-957wsz"/> Tailed',s=z(),i=D("div"),i.innerHTML='<p>Simple and quick monitoring of short-term processes over the web.</p> <p><a href="https://docs.tailed.live" target="_blank" class="svelte-957wsz">Read the Documentation</a></p>',r=z(),o=D("div"),l=D("button"),l.textContent="Zero Install",c=z(),a=D("button"),a.textContent="CLI",h=z(),u=D("button"),u.textContent="In-Process",f=z(),g=D("div"),b&&b.c(),T(t,"class","logo svelte-957wsz"),T(i,"class","strapline svelte-957wsz"),T(l,"class","svelte-957wsz"),Se(l,"active",n[1]==0),T(a,"class","svelte-957wsz"),Se(a,"active",n[1]==1),T(u,"class","svelte-957wsz"),Se(u,"active",n[1]==2),T(o,"class","tabs svelte-957wsz"),T(g,"class","tab-content svelte-957wsz"),T(e,"id","content"),T(e,"class","svelte-957wsz")},m(I,F){A(I,e,F),R(e,t),R(e,s),R(e,i),R(e,r),R(e,o),R(o,l),R(o,c),R(o,a),R(o,h),R(o,u),R(e,f),R(e,g),~p&&E[p].m(g,null),_=!0,m||(v=[Z(l,"click",n[14]),Z(a,"click",n[15]),Z(u,"click",n[16])],m=!0)},p(I,[F]){(!_||F&2)&&Se(l,"active",I[1]==0),(!_||F&2)&&Se(a,"active",I[1]==1),(!_||F&2)&&Se(u,"active",I[1]==2);let L=p;p=C(I),p===L?~p&&E[p].p(I,F):(b&&(pe(),U(E[L],1,1,()=>{E[L]=null}),me()),~p?(b=E[p],b?b.p(I,F):(b=E[p]=y[p](I),b.c()),$(b,1),b.m(g,null)):b=null)},i(I){_||($(b),_=!0)},o(I){U(b),_=!1},d(I){I&&P(e),~p&&E[p].d(),m=!1,ee(v)}}}function oo(n){n.preventDefault()}function lo(){return window.showOpenFilePicker!==void 0}function co(n,e,t){let s;const i=new Jr({length:22});At(async()=>{const L=await fetch("/rules/index.json");t(0,s=await L.json());const k=await er(()=>import("./Worker-347590a8.js"),[]);new k.default});let o=0,l,c,a,h,u="none";async function f(L){var w;L.preventDefault(),h.classList.contains("drop-over")&&h.classList.remove("drop-over");const k=(w=L.dataTransfer)==null?void 0:w.items;if(!k||k.length==0)return;const j=k[0];j.kind==="file"&&t(2,l=await j.getAsFileSystemHandle())}function g(L){h.classList.add("drop-over")}function p(L){h.classList.remove("drop-over")}function b(L){L.preventDefault(),h.classList.contains("drop-over")&&h.classList.remove("drop-over"),t(2,l=void 0)}async function _(L){L.preventDefault();try{const[k]=await window.showOpenFilePicker({multiple:!1});t(2,l=k)}catch(k){console.log(k)}}function m(L){l&&(t(3,c=!0),t(4,a=i.randomUUID()),postMessage(new wn(a,"start",u,l)))}function v(L){t(3,c=!1),postMessage(new wn(a,"stop",u,l))}const y=()=>t(1,o=0),E=()=>t(1,o=1),C=()=>t(1,o=2);function I(L){ve[L?"unshift":"push"](()=>{h=L,t(5,h)})}function F(){u=ns(this),t(6,u),t(0,s)}return t(0,s=[]),t(1,o=0),t(2,l=void 0),t(3,c=!1),t(4,a=""),[s,o,l,c,a,h,u,f,g,p,b,_,m,v,y,E,C,I,F]}class ao extends he{constructor(e){super(),ae(this,e,co,ro,te,{})}}function ho(n){let e,t,s,i;return e=new Kt({props:{path:"/:id",component:Ki}}),s=new Kt({props:{path:"/",component:ao}}),{c(){ce(e.$$.fragment),t=z(),ce(s.$$.fragment)},m(r,o){se(e,r,o),A(r,t,o),se(s,r,o),i=!0},p:S,i(r){i||($(e.$$.fragment,r),$(s.$$.fragment,r),i=!0)},o(r){U(e.$$.fragment,r),U(s.$$.fragment,r),i=!1},d(r){r&&P(t),ie(e,r),ie(s,r)}}}function uo(n){let e,t,s,i,r;return i=new Gs({props:{$$slots:{default:[ho]},$$scope:{ctx:n}}}),{c(){e=D("style"),e.textContent=`@import url('https://fonts.googleapis.com/css?family=Roboto&display=swap');
        @import url('https://fonts.googleapis.com/css?family=Roboto+Mono&display=swap');`,t=z(),s=D("main"),ce(i.$$.fragment)},m(o,l){R(document.head,e),A(o,t,l),A(o,s,l),se(i,s,null),r=!0},p(o,[l]){const c={};l&1&&(c.$$scope={dirty:l,ctx:o}),i.$set(c)},i(o){r||($(i.$$.fragment,o),r=!0)},o(o){U(i.$$.fragment,o),r=!1},d(o){o&&(P(t),P(s)),P(e),ie(i)}}}class fo extends he{constructor(e){super(),ae(this,e,null,uo,te,{})}}new fo({target:document.getElementById("app")});
